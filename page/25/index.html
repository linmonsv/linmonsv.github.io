<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Water&#39;s Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Water&#39;s Home">
<meta property="og:url" content="http://example.com/page/25/index.html">
<meta property="og:site_name" content="Water&#39;s Home">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Water">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Water's Home" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Water&#39;s Home</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-highly-available-image-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/11/highly-available-image-api/" class="article-date">
  <time class="dt-published" datetime="2017-12-11T03:00:07.000Z" itemprop="datePublished">2017-12-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/11/highly-available-image-api/">Highly available Image API</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Create-Service-For-Glance"><a href="#Create-Service-For-Glance" class="headerlink" title="Create Service For Glance"></a>Create Service For Glance</h3><p>[root@controller1 ~]# openstack service create –name glance –description “OpenStack Image” image<br>+————-+———————————-+<br> Field        Value<br>+————-+———————————-+<br> description  OpenStack Image<br> enabled      True<br> id           3083848116cd4706bc39241f81e3475b<br> name         glance<br> type         image<br>+————-+———————————-+<br>[root@controller1 ~]# openstack endpoint create –region RegionOne image public <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+<br> Field         Value<br>+————–+———————————-+<br> enabled       True<br> id            f3eb684e2209471795a04f6e73ce120f<br> interface     public<br> region        RegionOne<br> region_id     RegionOne<br> service_id    3083848116cd4706bc39241f81e3475b<br> service_name  glance<br> service_type  image<br> url           <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+<br>[root@controller1 ~]# openstack endpoint create –region RegionOne image internal <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+<br> Field         Value<br>+————–+———————————-+<br> enabled       True<br> id            bbf93cdcc35645288cfa90ef6239e1b5<br> interface     internal<br> region        RegionOne<br> region_id     RegionOne<br> service_id    3083848116cd4706bc39241f81e3475b<br> service_name  glance<br> service_type  image<br> url           <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+<br>[root@controller1 ~]# openstack endpoint create –region RegionOne image admin <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+<br> Field         Value<br>+————–+———————————-+<br> enabled       True<br> id            da194b1e1e8148859a45a83fac2c7403<br> interface     admin<br> region        RegionOne<br> region_id     RegionOne<br> service_id    3083848116cd4706bc39241f81e3475b<br> service_name  glance<br> service_type  image<br> url           <a target="_blank" rel="noopener" href="http://controller:9292/">http://controller:9292</a><br>+————–+———————————-+</p>
<h3 id="Install-OpenStack-Glance"><a href="#Install-OpenStack-Glance" class="headerlink" title="Install OpenStack Glance"></a>Install OpenStack Glance</h3><p>[root@controller ~]# yum install openstack-glance python-glance -y</p>
<h3 id="Configure-Glance-Service"><a href="#Configure-Glance-Service" class="headerlink" title="Configure Glance Service"></a>Configure Glance Service</h3><p>[root@controller1 ~]# cp &#x2F;etc&#x2F;glance&#x2F;glance-api.conf{,.bak}<br>[root@controller1 ~]# cp &#x2F;etc&#x2F;glance&#x2F;glance-registry.conf{,.bak}<br>[root@controller ~]# mkdir -p &#x2F;date&#x2F;glance</p>
<p>[root@controller1 ~]# echo “#</p>
<blockquote>
<p>[DEFAULT]<br>debug &#x3D; False<br>verbose &#x3D; True<br>bind_host &#x3D; controller1<br>bind_port &#x3D; 9292<br>auth_region &#x3D; RegionOne<br>registry_client_protocol &#x3D; http<br>[database]<br>connection &#x3D; mysql+pymysql:&#x2F;&#x2F;glance:glance@controller&#x2F;glance<br>[keystone_authtoken]<br>auth_uri &#x3D; <a target="_blank" rel="noopener" href="http://controller:5000/v3">http://controller:5000/v3</a><br>auth_url &#x3D; <a target="_blank" rel="noopener" href="http://controller:35357/v3">http://controller:35357/v3</a><br>memcached_servers &#x3D; controller1:11211,controller2:11211,controller3:11211<br>auth_type &#x3D; password<br>project_domain_name &#x3D; default<br>user_domain_name &#x3D; default<br>project_name &#x3D; service<br>username &#x3D; glance<br>password &#x3D; glance<br>[paste_deploy]<br>flavor &#x3D; keystone<br>[glance_store]<br>stores &#x3D; file,http<br>default_store &#x3D; file<br>filesystem_store_datadir &#x3D; &#x2F;data&#x2F;glance<br>[oslo_messaging_rabbit]<br>rabbit_userid &#x3D;openstack<br>rabbit_password &#x3D; openstack<br>rabbit_durable_queues&#x3D;true<br>rabbit_ha_queues &#x3D; True<br>rabbit_max_retries&#x3D;0<br>rabbit_port &#x3D; 5672<br>rabbit_hosts &#x3D; controller1:5672,controller2:5672,controller3:5672<br>#”&gt;&#x2F;etc&#x2F;glance&#x2F;glance-api.conf</p>
</blockquote>
<p>[root@controller1 ~]# echo “#</p>
<blockquote>
<p>[DEFAULT]<br>debug &#x3D; False<br>verbose &#x3D; True<br>bind_host &#x3D; controller1<br>bind_port &#x3D; 9191<br>workers &#x3D; 2<br>[database]<br>connection &#x3D; mysql+pymysql:&#x2F;&#x2F;glance:glance@controller&#x2F;glance<br>[keystone_authtoken]<br>auth_uri &#x3D; <a target="_blank" rel="noopener" href="http://controller:5000/v3">http://controller:5000/v3</a><br>auth_url &#x3D; <a target="_blank" rel="noopener" href="http://controller:35357/v3">http://controller:35357/v3</a><br>memcached_servers &#x3D; controller1:11211,controller2:11211,controller3:11211<br>auth_type &#x3D; password<br>project_domain_name &#x3D; default<br>user_domain_name &#x3D; default<br>project_name &#x3D; service<br>username &#x3D; glance<br>password &#x3D; glance<br>[paste_deploy]<br>flavor &#x3D; keystone<br>[oslo_messaging_rabbit]<br>rabbit_userid &#x3D;openstack<br>rabbit_password &#x3D; openstack<br>rabbit_durable_queues&#x3D;true<br>rabbit_ha_queues &#x3D; True<br>rabbit_max_retries&#x3D;0<br>rabbit_port &#x3D; 5672<br>rabbit_hosts &#x3D; controller1:5672,controller2:5672,controller3:5672<br>#”&gt;&#x2F;etc&#x2F;glance&#x2F;glance-registry.conf<br>[root@controller1 ~]# </p>
</blockquote>
<h3 id="Synchronize-Database"><a href="#Synchronize-Database" class="headerlink" title="Synchronize Database"></a>Synchronize Database</h3><p>[root@controller1 ~]# su -s &#x2F;bin&#x2F;sh -c “glance-manage db_sync” glance<br>&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;oslo_db&#x2F;sqlalchemy&#x2F;enginefacade.py:1328: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade<br>  expire_on_commit&#x3D;expire_on_commit, _conf&#x3D;conf)<br>INFO  [alembic.runtime.migration] Context impl MySQLImpl.<br>INFO  [alembic.runtime.migration] Will assume non-transactional DDL.<br>INFO  [alembic.runtime.migration] Running upgrade  -&gt; liberty, liberty initial<br>INFO  [alembic.runtime.migration] Running upgrade liberty -&gt; mitaka01, add index on created_at and updated_at columns of ‘images’ table<br>INFO  [alembic.runtime.migration] Running upgrade mitaka01 -&gt; mitaka02, update metadef os_nova_server<br>INFO  [alembic.runtime.migration] Running upgrade mitaka02 -&gt; ocata01, add visibility to and remove is_public from images<br>INFO  [alembic.runtime.migration] Running upgrade ocata01 -&gt; pike01, drop glare artifacts tables<br>INFO  [alembic.runtime.migration] Context impl MySQLImpl.<br>INFO  [alembic.runtime.migration] Will assume non-transactional DDL.<br>Upgraded database to: pike01, current revision(s): pike01</p>
<p>[root@controller1 ~]# mysql -h controller -u glance -pglance -e “use glance;show tables;”<br>+———————————-+<br> Tables_in_glance<br>+———————————-+<br> alembic_version<br> image_locations<br> image_members<br> image_properties<br> image_tags<br> images<br> metadef_namespace_resource_types<br> metadef_namespaces<br> metadef_objects<br> metadef_properties<br> metadef_resource_types<br> metadef_tags<br> migrate_version<br> task_info<br> tasks<br>+———————————-+</p>
<h3 id="Start-Glance-Service"><a href="#Start-Glance-Service" class="headerlink" title="Start Glance Service"></a>Start Glance Service</h3><p>[root@controller1 ~]# systemctl enable openstack-glance-api openstack-glance-registry<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;openstack-glance-api.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;openstack-glance-api.service.<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;openstack-glance-registry.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;openstack-glance-registry.service.<br>[root@controller1 ~]# systemctl restart openstack-glance-api openstack-glance-registry<br>[root@controller1 ~]# netstat -antpgrep python2<br>tcp        0      0 192.168.220.21:9292     0.0.0.0:*               LISTEN      13125&#x2F;python2<br>tcp        0      0 192.168.220.21:9191     0.0.0.0:*               LISTEN      13126&#x2F;python2<br>[root@controller1 ~]# netstat -antpegrep ‘92929191’<br>tcp        0      0 192.168.220.21:9292     0.0.0.0:*               LISTEN      13125&#x2F;python2<br>tcp        0      0 192.168.220.21:9191     0.0.0.0:*               LISTEN      13126&#x2F;python2<br>tcp       32      0 192.168.220.21:39292    192.168.220.21:2224     CLOSE_WAIT  699&#x2F;ruby<br>tcp        0      0 192.168.220.11:49292    192.168.220.23:2224     ESTABLISHED 699&#x2F;ruby            </p>
<h3 id="Configure-HAProxy-For-Glance"><a href="#Configure-HAProxy-For-Glance" class="headerlink" title="Configure HAProxy For Glance"></a>Configure HAProxy For Glance</h3><p>[root@controller1 ~]# echo ‘</p>
<blockquote>
<p>#glance_api_cluster<br>listen glance_api_cluster<br>  bind controller:9292<br>  #balance  source<br>  option  tcpka<br>  option  httpchk<br>  option  tcplog<br>  server controller1 controller1:9292 check inter 2000 rise 2 fall 5<br>  server controller2 controller2:9292 check inter 2000 rise 2 fall 5<br>  server controller3 controller3:9292 check inter 2000 rise 2 fall 5<br>‘&gt;&gt;&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg<br>[root@controller1 ~]# ‘<br>[root@controller1 ~]# systemctl restart haproxy.service<br>[root@controller1 ~]# netstat -antpgrep haproxy<br>tcp        0      0 192.168.220.20:9292     0.0.0.0:*               LISTEN      13170&#x2F;haproxy<br>tcp        0      0 0.0.0.0:1080            0.0.0.0:*               LISTEN      13170&#x2F;haproxy<br>tcp        0      0 192.168.220.20:35357    0.0.0.0:*               LISTEN      13170&#x2F;haproxy<br>tcp        0      0 192.168.220.20:5000     0.0.0.0:*               LISTEN      13170&#x2F;haproxy<br>tcp        0      0 0.0.0.0:5000            0.0.0.0:*               LISTEN      13170&#x2F;haproxy       </p>
</blockquote>
<h3 id="Create-Cirros-Image"><a href="#Create-Cirros-Image" class="headerlink" title="Create Cirros Image"></a>Create Cirros Image</h3><p>[root@controller glance]# wget <a target="_blank" rel="noopener" href="http://download.cirros-cloud.net/0.3.5/cirros-0.3.5-x86/_64-disk.img">http://download.cirros-cloud.net/0.3.5/cirros-0.3.5-x86\_64-disk.img</a><br>–2017-12-18 02:06:45–  <a target="_blank" rel="noopener" href="http://download.cirros-cloud.net/0.3.5/cirros-0.3.5-x86/_64-disk.img">http://download.cirros-cloud.net/0.3.5/cirros-0.3.5-x86\_64-disk.img</a><br>Resolving download.cirros-cloud.net (download.cirros-cloud.net)… 64.90.42.85, 2607:f298:6:a036::bd6:a72a<br>Connecting to download.cirros-cloud.net (download.cirros-cloud.net)64.90.42.85:80… connected.<br>HTTP request sent, awaiting response… 200 OK<br>Length: 13267968 (13M) [text&#x2F;plain]<br>Saving to: ‘cirros-0.3.5-x86_64-disk.img’</p>
<p>100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 13,267,968  1.04MB&#x2F;s   in 13s    </p>
<p>2017-12-18 02:06:58 (1023 KB&#x2F;s) - ‘cirros-0.3.5-x86_64-disk.img’ saved [13267968&#x2F;13267968]</p>
<p>[root@controller1 glance]# openstack image create “cirros” –file cirros-0.3.5-x86_64-disk.img –disk-format qcow2 –container-format bare –public<br>+——————+——————————————————+<br> Field             Value<br>+——————+——————————————————+<br> checksum          f8ab98ff5e73ebab884d80c9dc9c7290<br> container_format  bare<br> created_at        2017-12-18T07:37:04Z<br> disk_format       qcow2<br> file              &#x2F;v2&#x2F;images&#x2F;82e5d7d9-86a0-4266-a599-e50e8c4b0cbe&#x2F;file<br> id                82e5d7d9-86a0-4266-a599-e50e8c4b0cbe<br> min_disk          0<br> min_ram           0<br> name              cirros<br> owner             2291724ac1a54d65844cc5dba56f4803<br> protected         False<br> schema            &#x2F;v2&#x2F;schemas&#x2F;image<br> size              13267968<br> status            active<br> tags<br> updated_at        2017-12-18T07:37:05Z<br> virtual_size      None<br> visibility        public<br>+——————+——————————————————+</p>
<h3 id="List-OpenStack-Image"><a href="#List-OpenStack-Image" class="headerlink" title="List OpenStack Image"></a>List OpenStack Image</h3><p>[root@controller1 glance]# openstack image list<br>+————————————–+——–+——–+<br> ID                                    Name    Status<br>+————————————–+——–+——–+<br> 82e5d7d9-86a0-4266-a599-e50e8c4b0cbe  cirros  active<br>+————————————–+——–+——–+</p>
<h3 id="Configure-Other-Controller-Nodes"><a href="#Configure-Other-Controller-Nodes" class="headerlink" title="Configure Other Controller Nodes"></a>Configure Other Controller Nodes</h3><p>[root@controller1 glance]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;glance&#x2F;* controller2:&#x2F;etc&#x2F;glance&#x2F;<br>sending incremental file list<br>glance-api.conf<br>         883 100%    0.00kB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;44&#x2F;45)<br>glance-api.conf.bak<br>      150676 100%   14.37MB&#x2F;s    0:00:00 (xfer#2, to-check&#x3D;43&#x2F;45)<br>glance-registry.conf<br>         744 100%   72.66kB&#x2F;s    0:00:00 (xfer#3, to-check&#x3D;41&#x2F;45)<br>glance-registry.conf.bak<br>       77404 100%    5.27MB&#x2F;s    0:00:00 (xfer#4, to-check&#x3D;40&#x2F;45)<br>metadefs&#x2F;<br>rootwrap.d&#x2F;</p>
<p>sent 61739 bytes  received 126 bytes  123730.00 bytes&#x2F;sec<br>total size is 504600  speedup is 8.16</p>
<p>[root@controller1 glance]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;glance&#x2F;* controller3:&#x2F;etc&#x2F;glance&#x2F;<br>sending incremental file list<br>glance-api.conf<br>         883 100%    0.00kB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;44&#x2F;45)<br>glance-api.conf.bak<br>      150676 100%   28.74MB&#x2F;s    0:00:00 (xfer#2, to-check&#x3D;43&#x2F;45)<br>glance-registry.conf<br>         744 100%  121.09kB&#x2F;s    0:00:00 (xfer#3, to-check&#x3D;41&#x2F;45)<br>glance-registry.conf.bak<br>       77404 100%    9.23MB&#x2F;s    0:00:00 (xfer#4, to-check&#x3D;40&#x2F;45)<br>metadefs&#x2F;<br>rootwrap.d&#x2F;</p>
<p>sent 61739 bytes  received 126 bytes  123730.00 bytes&#x2F;sec<br>total size is 504600  speedup is 8.16</p>
<p>[root@controller1 glance]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg controller2:&#x2F;etc&#x2F;haproxy&#x2F;<br>sending incremental file list<br>haproxy.cfg<br>        4376 100%    3.51MB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;0&#x2F;1)</p>
<p>sent 75 bytes  received 73 bytes  296.00 bytes&#x2F;sec<br>total size is 4376  speedup is 29.57<br>[root@controller1 glance]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg controller3:&#x2F;etc&#x2F;haproxy&#x2F;</p>
<p>sending incremental file list<br>haproxy.cfg<br>        4376 100%    3.51MB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;0&#x2F;1)</p>
<p>sent 75 bytes  received 73 bytes  296.00 bytes&#x2F;sec<br>total size is 4376  speedup is 29.57<br>[root@controller1 glance]#<br>[root@controller1 glance]# ssh controller2 “sed -i ‘1,10s&#x2F;controller1&#x2F;controller2&#x2F;‘ &#x2F;etc&#x2F;glance&#x2F;glance-api.conf &#x2F;etc&#x2F;glance&#x2F;glance-registry.conf”<br>[root@controller1 glance]# ssh controller3 “sed -i ‘1,10s&#x2F;controller1&#x2F;controller3&#x2F;‘ &#x2F;etc&#x2F;glance&#x2F;glance-api.conf &#x2F;etc&#x2F;glance&#x2F;glance-registry.conf”</p>
<h3 id="Start-Other-Nodes’s-Service"><a href="#Start-Other-Nodes’s-Service" class="headerlink" title="Start Other Nodes’s Service"></a>Start Other Nodes’s Service</h3><p>[root@controller1 glance]# ssh controller2 “systemctl enable openstack-glance-api openstack-glance-registry”<br>[root@controller1 glance]# ssh controller2 “systemctl restart openstack-glance-api openstack-glance-registry haproxy.service;”<br>[root@controller1 glance]# ssh controller3 “systemctl enable openstack-glance-api openstack-glance-registry”<br>[root@controller1 glance]# ssh controller3 “systemctl restart openstack-glance-api openstack-glance-registry haproxy.service;”</p>
<h3 id="Add-OpenStack-Image-API-resource-to-Pacemaker"><a href="#Add-OpenStack-Image-API-resource-to-Pacemaker" class="headerlink" title="Add OpenStack Image API resource to Pacemaker"></a>Add OpenStack Image API resource to Pacemaker</h3><p>[root@controller1 glance]# cd &#x2F;usr&#x2F;lib&#x2F;ocf&#x2F;resource.d&#x2F;openstack<br>[root@controller1 openstack]# wget <a target="_blank" rel="noopener" href="https://git.openstack.org/cgit/openstack/openstack-resource-agents/plain/ocf/glance-api">https://git.openstack.org/cgit/openstack/openstack-resource-agents/plain/ocf/glance-api</a><br>–2017-12-18 03:00:41–  <a target="_blank" rel="noopener" href="https://git.openstack.org/cgit/openstack/openstack-resource-agents/plain/ocf/glance-api">https://git.openstack.org/cgit/openstack/openstack-resource-agents/plain/ocf/glance-api</a><br>Resolving git.openstack.org (git.openstack.org)… 104.130.246.128, 2001:4800:7819:103:be76:4eff:fe06:63c<br>Connecting to git.openstack.org (git.openstack.org)104.130.246.128:443… connected.<br>HTTP request sent, awaiting response… 200 OK<br>Length: 11439 (11K) [text&#x2F;plain]<br>Saving to: ‘glance-api’</p>
<p>100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 11,439      –.-K&#x2F;s   in 0s      </p>
<p>2017-12-18 03:00:42 (31.5 MB&#x2F;s) - ‘glance-api’ saved [11439&#x2F;11439]</p>
<p>[root@controller1 openstack]# chmod a+rx *<br>[root@controller1 openstack]# ls<br>glance-api  nova-compute-wait  NovaEvacuate</p>
<h5 id="Create-Local-Repository"><a href="#Create-Local-Repository" class="headerlink" title="Create Local Repository"></a>Create Local Repository</h5><p>[root@localrepo yum.repos.d]# wget <a target="_blank" rel="noopener" href="http://download.opensuse.org/repositories/network:/ha-clustering:/Stable/CentOS/_CentOS-7/network:ha-clustering:Stable.repo">http://download.opensuse.org/repositories/network:/ha-clustering:/Stable/CentOS\_CentOS-7/network:ha-clustering:Stable.repo</a><br>[root@localrepo myrepo]# reposync –repoid&#x3D;network_ha-clustering_Stable<br>[root@localrepo myrepo]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;network_ha-clustering_Stable&#x2F;</p>
<p>[root@controller1 openstack]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;network_ha-clustering_Stable.repo<br>[network_ha-clustering_Stable]<br>name&#x3D;Stable High Availability&#x2F;Clustering packages (CentOS_CentOS-7)<br>type&#x3D;rpm-md<br>baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/network/_ha-clustering/_Stable/">http://192.168.220.200/myrepo/network\_ha-clustering\_Stable/</a><br>gpgcheck&#x3D;0<br>gpgkey&#x3D;<a target="_blank" rel="noopener" href="http://download.opensuse.org/repositories/network:/ha-clustering:/Stable/CentOS/_CentOS-7/repodata/repomd.xml.key">http://download.opensuse.org/repositories/network:/ha-clustering:/Stable/CentOS\_CentOS-7/repodata/repomd.xml.key</a><br>enabled&#x3D;1</p>
<h3 id="Install-CRMSH"><a href="#Install-CRMSH" class="headerlink" title="Install CRMSH"></a>Install CRMSH</h3><p>[root@controller1 openstack]# yum install crmsh -y</p>
<p>[root@controller1 openstack]# crm configure</p>
<p>crm(live)configure# primitive p_glance-api ocf:openstack:glance-api \</p>
<blockquote>
<p>  params config&#x3D;”&#x2F;etc&#x2F;glance&#x2F;glance-api.conf” \<br>  os_password&#x3D;”admin” \<br>  os_username&#x3D;”admin” os_tenant_name&#x3D;”admin” \<br>  os_auth_url&#x3D;”<a target="_blank" rel="noopener" href="http://controller:5000/v3/&quot;">http://controller:5000/v3/&quot;</a> \<br>  op monitor interval&#x3D;”30s” timeout&#x3D;”30s”</p>
</blockquote>
<p>crm(live)configure# commit</p>
<h3 id="Configure-OpenStack-Image-service-API"><a href="#Configure-OpenStack-Image-service-API" class="headerlink" title="Configure OpenStack Image service API"></a>Configure OpenStack Image service API</h3><p>cp &#x2F;etc&#x2F;glance&#x2F;glance-api.conf{,.bak}</p>
<p>connection &#x3D; mysql+pymysql:&#x2F;&#x2F;glance:glance@controller&#x2F;glance<br>bind_host &#x3D; controller<br>registry_host &#x3D; controller<br>notifier_strategy &#x3D; rabbit<br>rabbit_host &#x3D; controller</p>
<p>nova.conf</p>
<p>[glance]</p>
<p>api_servers &#x3D; 10.0.0.11</p>
<h3 id="Configure-OpenStack-services-to-use-the-highly-available-OpenStack-Image-API"><a href="#Configure-OpenStack-services-to-use-the-highly-available-OpenStack-Image-API" class="headerlink" title="Configure OpenStack services to use the highly available OpenStack Image API"></a>Configure OpenStack services to use the highly available OpenStack Image API</h3><p>$ openstack endpoint create –region $KEYSTONE_REGION image public <a target="_blank" rel="noopener" href="http://10.0.0.10:9292/">http://10.0.0.10:9292</a><br>$ openstack endpoint create –region $KEYSTONE_REGION image admin <a target="_blank" rel="noopener" href="http://10.0.0.11:9292/">http://10.0.0.11:9292</a><br>$ openstack endpoint create –region $KEYSTONE_REGION image internal <a target="_blank" rel="noopener" href="http://10.0.0.11:9292/">http://10.0.0.11:9292</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/11/highly-available-image-api/" data-id="cl56jpsqx00a4asch15bm5gqb" data-title="Highly available Image API" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-highly-available-identity-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/highly-available-identity-api/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T06:32:18.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/highly-available-identity-api/">Highly available Identity API</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Installing-KeyStone-On-Controllers"><a href="#Installing-KeyStone-On-Controllers" class="headerlink" title="Installing KeyStone On Controllers"></a>Installing KeyStone On Controllers</h3><p>[root@controller ~]# yum install openstack-keystone httpd mod_wsgi python-openstackclient openstack-utils -y</p>
<h3 id="Configure-MemCached"><a href="#Configure-MemCached" class="headerlink" title="Configure MemCached"></a>Configure MemCached</h3><p>[root@controller ~]# sed -i ‘s&#x2F;127.0.0.1&#x2F;0.0.0.0&#x2F;‘ &#x2F;etc&#x2F;sysconfig&#x2F;memcached<br>[root@controller ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;memcached<br>PORT&#x3D;”11211”<br>USER&#x3D;”memcached”<br>MAXCONN&#x3D;”1024”<br>CACHESIZE&#x3D;”64”<br>OPTIONS&#x3D;”-l 0.0.0.0,::1”</p>
<h3 id="Start-MemCached-Service"><a href="#Start-MemCached-Service" class="headerlink" title="Start MemCached Service"></a>Start MemCached Service</h3><p>[root@controller ~]# systemctl enable memcached.service<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;memcached.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;memcached.service.<br>[root@controller ~]# systemctl start memcached.service<br>[root@controller ~]# systemctl status memcached.service<br>● memcached.service - memcached daemon<br>   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;memcached.service; enabled; vendor preset: disabled)<br>   Active: active (running) since Sun 2017-12-17 22:07:25 EST; 1s ago<br> Main PID: 7500 (memcached)<br>   CGroup: &#x2F;system.slice&#x2F;memcached.service<br>           └─7500 &#x2F;usr&#x2F;bin&#x2F;memcached -p 11211 -u memcached -m 64 -c 1024 -l 0.0.0.0,::1</p>
<p>Dec 17 22:07:25 controller1 systemd[1]: Started memcached daemon.<br>Dec 17 22:07:25 controller1 systemd[1]: Starting memcached daemon…</p>
<h3 id="Configure-Httpd-Service"><a href="#Configure-Httpd-Service" class="headerlink" title="Configure Httpd Service"></a>Configure Httpd Service</h3><p>[root@controller ~]# cp &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf{,.bak}<br>[root@controller1 ~]# echo “ServerName controller1”&gt;&gt;&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf<br>[root@controller2 ~]# echo “ServerName controller2”&gt;&gt;&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf<br>[root@controller3 ~]# echo “ServerName controller3”&gt;&gt;&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf<br>[root@controller ~]# ln -s &#x2F;usr&#x2F;share&#x2F;keystone&#x2F;wsgi-keystone.conf &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;</p>
<h3 id="Configure-KeyStone"><a href="#Configure-KeyStone" class="headerlink" title="Configure KeyStone"></a>Configure KeyStone</h3><p>[root@controller ~]# cp &#x2F;usr&#x2F;share&#x2F;keystone&#x2F;wsgi-keystone.conf{,.bak}<br>[root@controller ~]# sed -i ‘s&#x2F;5000&#x2F;4999&#x2F;‘ &#x2F;usr&#x2F;share&#x2F;keystone&#x2F;wsgi-keystone.conf<br>[root@controller ~]# sed -i ‘s&#x2F;35357&#x2F;35356&#x2F;‘ &#x2F;usr&#x2F;share&#x2F;keystone&#x2F;wsgi-keystone.conf</p>
<h3 id="Start-Httpd-Service"><a href="#Start-Httpd-Service" class="headerlink" title="Start Httpd Service"></a>Start Httpd Service</h3><p>[root@controller ~]# systemctl enable httpd.service<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;httpd.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;httpd.service.<br>[root@controller ~]# systemctl restart httpd.service<br>[root@controller ~]# netstat -antpegrep ‘httpd’<br>tcp6       0      0 :::80                   :::*                    LISTEN      1946&#x2F;httpd<br>tcp6       0      0 :::35356                :::*                    LISTEN      1946&#x2F;httpd<br>tcp6       0      0 :::4999                 :::*                    LISTEN      1946&#x2F;httpd          </p>
<h3 id="Configure-HAPorxy-For-KeyStone"><a href="#Configure-HAPorxy-For-KeyStone" class="headerlink" title="Configure HAPorxy For KeyStone"></a>Configure HAPorxy For KeyStone</h3><p>[root@controller ~]# echo ‘</p>
<blockquote>
<p>#keystone<br>listen keystone_admin_cluster<br>bind controller:35357<br>#balance  source<br>option  tcpka<br>option  httpchk<br>option  tcplog<br>server controller1 controller1:35356 check inter 2000 rise 2 fall 5<br>server controller2 controller2:35356 check inter 2000 rise 2 fall 5<br>server controller3 controller3:35356 check inter 2000 rise 2 fall 5</p>
<p>listen keystone_public_cluster<br>bind controller:5000<br>#balance  source<br>option  tcpka<br>option  httpchk<br>option  tcplog<br>server controller1 controller1:4999 check inter 2000 rise 2 fall 5<br>server controller2 controller2:4999 check inter 2000 rise 2 fall 5<br>server controller3 controller3:4999 check inter 2000 rise 2 fall 5<br>‘&gt;&gt;&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg<br>[root@controller ~]# ‘<br>[root@controller ~]# systemctl restart haproxy.service<br>[root@controller ~]# netstat -antpegrep ‘haproxyhttpd’<br>tcp        0      0 0.0.0.0:1080            0.0.0.0:*               LISTEN      2111&#x2F;haproxy<br>tcp        0      0 192.168.220.20:35357    0.0.0.0:*               LISTEN      2111&#x2F;haproxy<br>tcp        0      0 192.168.220.20:5000     0.0.0.0:*               LISTEN      2111&#x2F;haproxy<br>tcp        0      0 0.0.0.0:5000            0.0.0.0:*               LISTEN      2111&#x2F;haproxy<br>tcp6       0      0 :::80                   :::*                    LISTEN      1946&#x2F;httpd<br>tcp6       0      0 :::35356                :::*                    LISTEN      1946&#x2F;httpd<br>tcp6       0      0 :::4999                 :::*                    LISTEN      1946&#x2F;httpd          </p>
</blockquote>
<h3 id="Configure-KeyStone-1"><a href="#Configure-KeyStone-1" class="headerlink" title="Configure KeyStone"></a>Configure KeyStone</h3><p>[root@controller1 ~]# KEYSTONE_SECRET&#x3D;$(openssl rand -hex 10)<br>[root@controller1 ~]#<br>[root@controller1 ~]# cp &#x2F;etc&#x2F;keystone&#x2F;keystone.conf &#x2F;etc&#x2F;keystone&#x2F;keystone.conf.bak<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf DEFAULT admin_token $KEYSTONE_SECRET<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf DEFAULT verbose true<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf database connection mysql+pymysql:&#x2F;&#x2F;keystone:keystone@controller&#x2F;keystone<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf cache backend oslo_cache.memcache_pool<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf cache enabled true<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf cache memcache_servers controller1:11211,controller2:11211,controller3:11211<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf memcache servers controller1:11211,controller2:11211,controller3:11211<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf token driver memcache<br>[root@controller1 ~]# openstack-config –set &#x2F;etc&#x2F;keystone&#x2F;keystone.conf token provider fernet</p>
<h3 id="Synchronize-Database"><a href="#Synchronize-Database" class="headerlink" title="Synchronize Database"></a>Synchronize Database</h3><p>[root@controller1 ~]# su -s &#x2F;bin&#x2F;sh -c “keystone-manage db_sync” keystone<br>[root@controller1 ~]# keystone-manage fernet_setup –keystone-user keystone –keystone-group keystone<br>[root@controller1 ~]# keystone-manage credential_setup –keystone-user keystone –keystone-group keystone</p>
<h3 id="Configure-Other-Controller-Nodes"><a href="#Configure-Other-Controller-Nodes" class="headerlink" title="Configure Other Controller Nodes"></a>Configure Other Controller Nodes</h3><p>[root@controller1 ~]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;keystone&#x2F;* controller2:&#x2F;etc&#x2F;keystone&#x2F;<br>sending incremental file list<br>keystone.conf<br>      115180 100%  108.49MB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;10&#x2F;13)<br>keystone.conf.bak<br>      114875 100%   54.78MB&#x2F;s    0:00:00 (xfer#2, to-check&#x3D;9&#x2F;13)<br>credential-keys&#x2F;<br>credential-keys&#x2F;0<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#3, to-check&#x3D;3&#x2F;13)<br>credential-keys&#x2F;1<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#4, to-check&#x3D;2&#x2F;13)<br>fernet-keys&#x2F;<br>fernet-keys&#x2F;0<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#5, to-check&#x3D;1&#x2F;13)<br>fernet-keys&#x2F;1<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#6, to-check&#x3D;0&#x2F;13)</p>
<p>sent 2209 bytes  received 2114 bytes  2882.00 bytes&#x2F;sec<br>total size is 236741  speedup is 54.76<br>[root@controller1 ~]# rsync -avzP -e ‘ssh -p 22’ &#x2F;etc&#x2F;keystone&#x2F;* controller3:&#x2F;etc&#x2F;keystone&#x2F;<br>sending incremental file list<br>keystone.conf<br>      115180 100%  108.49MB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;10&#x2F;13)<br>keystone.conf.bak<br>      114875 100%   54.78MB&#x2F;s    0:00:00 (xfer#2, to-check&#x3D;9&#x2F;13)<br>credential-keys&#x2F;<br>credential-keys&#x2F;0<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#3, to-check&#x3D;3&#x2F;13)<br>credential-keys&#x2F;1<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#4, to-check&#x3D;2&#x2F;13)<br>fernet-keys&#x2F;<br>fernet-keys&#x2F;0<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#5, to-check&#x3D;1&#x2F;13)<br>fernet-keys&#x2F;1<br>          44 100%   21.48kB&#x2F;s    0:00:00 (xfer#6, to-check&#x3D;0&#x2F;13)</p>
<p>sent 2209 bytes  received 2114 bytes  8646.00 bytes&#x2F;sec<br>total size is 236741  speedup is 54.76</p>
<h3 id="Restart-Httpd-Service"><a href="#Restart-Httpd-Service" class="headerlink" title="Restart Httpd Service"></a>Restart Httpd Service</h3><p>[root@controller1 ~]# systemctl restart httpd.service<br>[root@controller1 ~]# ssh controller2 “systemctl restart httpd.service”<br>[root@controller1 ~]# ssh controller3 “systemctl restart httpd.service”</p>
<h3 id="Create-Admin-Role"><a href="#Create-Admin-Role" class="headerlink" title="Create Admin Role"></a>Create Admin Role</h3><p>[root@controller1 ~]# keystone-manage bootstrap –bootstrap-password admin \</p>
<blockquote>
<p>–bootstrap-admin-url <a target="_blank" rel="noopener" href="http://controller:35357/v3/">http://controller:35357/v3/</a> \<br>–bootstrap-internal-url <a target="_blank" rel="noopener" href="http://controller:5000/v3/">http://controller:5000/v3/</a> \<br>–bootstrap-public-url <a target="_blank" rel="noopener" href="http://controller:5000/v3/">http://controller:5000/v3/</a> \<br>–bootstrap-region-id RegionOne</p>
</blockquote>
<h3 id="Configure-Admin-Resource"><a href="#Configure-Admin-Resource" class="headerlink" title="Configure Admin Resource"></a>Configure Admin Resource</h3><p>[root@controller1 ~]# echo “</p>
<blockquote>
<p>export OS_PROJECT_DOMAIN_NAME&#x3D;default<br>export OS_USER_DOMAIN_NAME&#x3D;default<br>export OS_PROJECT_NAME&#x3D;admin<br>export OS_USERNAME&#x3D;admin<br>export OS_PASSWORD&#x3D;admin<br>export OS_AUTH_URL&#x3D;<a target="_blank" rel="noopener" href="http://controller:35357/v3">http://controller:35357/v3</a><br>export OS_IDENTITY_API_VERSION&#x3D;3<br>export OS_IMAGE_API_VERSION&#x3D;2<br>“&gt;&#x2F;root&#x2F;admin-openrc<br>[root@controller1 ~]# “<br>[root@controller1 ~]# source &#x2F;root&#x2F;admin-openrc<br>[root@controller1 ~]# openstack token issue<br>+————+—————————————————————————————————————————————————————————————–+<br> Field       Value<br>+————+—————————————————————————————————————————————————————————————–+<br> expires     2017-12-15T11:24:26+0000<br> id          gAAAAABaM6LaRTUjdiPkk1_5ydJV38A7d8ksrrD270fHt5Rc6SZZiIqhQXD70YdFVZqzfK0wWnxqF2jpAy1yBB6Tt-_v9VGbwyGORDJ-MesmmcmychP65oL_2dY8O4N09Mb8RZZm29wkJzOjgQffiFkmmjm3H7mAjfEHqbUxS-RdNcrnFEY0sTQ<br> project_id  2291724ac1a54d65844cc5dba56f4803<br> user_id     c69e3e92d2e9485dabc42d845574d965<br>+————+—————————————————————————————————————————————————————————————–+</p>
</blockquote>
<h3 id="Create-OpenStack-Project"><a href="#Create-OpenStack-Project" class="headerlink" title="Create OpenStack Project"></a>Create OpenStack Project</h3><p>[root@controller1 ~]# openstack project create –domain default –description “Service Project” service<br>+————-+———————————-+<br> Field        Value<br>+————-+———————————-+<br> description  Service Project<br> domain_id    default<br> enabled      True<br> id           78757402f85a467995bcbd69b2183ba5<br> is_domain    False<br> name         service<br> parent_id    default<br>+————-+———————————-+<br>[root@controller1 ~]# openstack user create –domain default –password&#x3D;glance glance<br>+———————+———————————-+<br> Field                Value<br>+———————+———————————-+<br> domain_id            default<br> enabled              True<br> id                   1072761f1a714aa8ad31a8e3f32fdc94<br> name                 glance<br> options              {}<br> password_expires_at  None<br>+———————+———————————-+<br>[root@controller1 ~]# openstack role add –project service –user glance admin<br>[root@controller1 ~]# openstack user create –domain default –password&#x3D;nova nova<br>+———————+———————————-+<br> Field                Value<br>+———————+———————————-+<br> domain_id            default<br> enabled              True<br> id                   83ce33fed0fe4c1894b6448cc17c32f7<br> name                 nova<br> options              {}<br> password_expires_at  None<br>+———————+———————————-+<br>[root@controller1 ~]# openstack role add –project service –user nova admin<br>[root@controller1 ~]# openstack user create –domain default –password&#x3D;neutron neutron<br>+———————+———————————-+<br> Field                Value<br>+———————+———————————-+<br> domain_id            default<br> enabled              True<br> id                   d0ed457a96824cffb030d3c57b4a8218<br> name                 neutron<br> options              {}<br> password_expires_at  None<br>+———————+———————————-+<br>[root@controller1 ~]# openstack role add –project service –user neutron admin</p>
<p>[root@controller1 ~]# openstack project create –domain default –description “Demo Project” demo<br>+————-+———————————-+<br> Field        Value<br>+————-+———————————-+<br> description  Demo Project<br> domain_id    default<br> enabled      True<br> id           3ddffab721d24934a0cbd49def5aa615<br> is_domain    False<br> name         demo<br> parent_id    default<br>+————-+———————————-+<br>[root@controller1 ~]# openstack user create –domain default –password&#x3D;demo demo<br>+———————+———————————-+<br> Field                Value<br>+———————+———————————-+<br> domain_id            default<br> enabled              True<br> id                   7884786780534d82afa0085028d2eb9b<br> name                 demo<br> options              {}<br> password_expires_at  None<br>+———————+———————————-+<br>[root@controller1 ~]# openstack role create user<br>+———–+———————————-+<br> Field      Value<br>+———–+———————————-+<br> domain_id  None<br> id         0e067a05c0334234be3e19cad51cc1b5<br> name       user<br>+———–+———————————-+<br>[root@controller1 ~]# openstack role add –project demo –user demo user</p>
<h3 id="Add-OpenStack-Identity-resource-to-Pacemaker"><a href="#Add-OpenStack-Identity-resource-to-Pacemaker" class="headerlink" title="Add OpenStack Identity resource to Pacemaker"></a>Add OpenStack Identity resource to Pacemaker</h3><p>[root@controller1 ~]# pcs resource create openstack-keystone systemd:openstack-keystone –clone interleave&#x3D;true</p>
<h3 id="Configure-OpenStack-Identity-service"><a href="#Configure-OpenStack-Identity-service" class="headerlink" title="Configure OpenStack Identity service"></a>Configure OpenStack Identity service</h3><p># cat keystone.conf</p>
<p>bind_host &#x3D; 10.0.0.12<br>public_bind_host &#x3D; 10.0.0.12<br>admin_bind_host &#x3D; 10.0.0.12</p>
<p>[catalog]<br>driver &#x3D; keystone.catalog.backends.sql.Catalog</p>
<h1 id="…"><a href="#…" class="headerlink" title="…"></a>…</h1><p>[identity]<br>driver &#x3D; keystone.identity.backends.sql.Identity</p>
<h1 id="…-1"><a href="#…-1" class="headerlink" title="…"></a>…</h1><h3 id="Configure-OpenStack-services-to-use-the-highly-available-OpenStack-Identity"><a href="#Configure-OpenStack-services-to-use-the-highly-available-OpenStack-Identity" class="headerlink" title="Configure OpenStack services to use the highly available OpenStack Identity"></a>Configure OpenStack services to use the highly available OpenStack Identity</h3><p># cat api-paste.ini</p>
<p>auth_host &#x3D; 10.0.0.11</p>
<p>$ openstack endpoint create –region $KEYSTONE_REGION $service-type public <a target="_blank" rel="noopener" href="http://public/_VIP:5000/v2.0">http://PUBLIC\_VIP:5000/v2.0</a><br>$ openstack endpoint create –region $KEYSTONE_REGION $service-type admin <a target="_blank" rel="noopener" href="http://10.0.0.11:35357/v2.0">http://10.0.0.11:35357/v2.0</a><br>$ openstack endpoint create –region $KEYSTONE_REGION $service-type internal <a target="_blank" rel="noopener" href="http://10.0.0.11:5000/v2.0">http://10.0.0.11:5000/v2.0</a></p>
<h1 id="cat-local-settings-py"><a href="#cat-local-settings-py" class="headerlink" title="cat local_settings.py"></a>cat local_settings.py</h1><p>OPENSTACK_HOST &#x3D; 10.0.0.11</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/highly-available-identity-api/" data-id="cl56jpsqs00a1aschdrsnbo81" data-title="Highly available Identity API" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-configure-vip-haproxy" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/configure-vip-haproxy/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T03:55:01.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/configure-vip-haproxy/">Configure the VIP &amp; HAProxy</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Configure-the-VIP"><a href="#Configure-the-VIP" class="headerlink" title="Configure the VIP"></a>Configure the VIP</h3><p>[root@controller1 ~]# pcs resource create vip ocf:heartbeat:IPaddr2 ip&#x3D;”192.168.220.20” cidr_netmask&#x3D;”24” op monitor interval&#x3D;”30s”</p>
<h3 id="Installing-HAProxy-On-Controllers"><a href="#Installing-HAProxy-On-Controllers" class="headerlink" title="Installing HAProxy On Controllers"></a>Installing HAProxy On Controllers</h3><p>[root@controller ~]# yum install haproxy httpd -y</p>
<h3 id="Configuring-HAProxy"><a href="#Configuring-HAProxy" class="headerlink" title="Configuring HAProxy"></a>Configuring HAProxy</h3><p>[root@controller1 ~]# cp &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg{,.bak}</p>
<p>[root@controller1 ~]# diff &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg.bak<br>87,99d86<br>&lt; listen stats<br>&lt;       bind 0.0.0.0:1080<br>&lt;       mode http<br>&lt;       option httplog<br>&lt;       log 127.0.0.1 local0 err<br>&lt;       maxconn 10<br>&lt;       stats refresh 30s<br>&lt;       stats uri &#x2F;admin<br>&lt;       stats realm Haproxy\ Statistics<br>&lt;       stats auth admin:admin<br>&lt;       stats hide-version<br>&lt;       stats admin if TRUE<br>&lt; </p>
<p>[root@controller1 ~]# scp &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg root@controller2:&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg<br>[root@controller1 ~]# scp &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg root@controller3:&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg</p>
<h4 id="Allow-Non-Local-IP-Binding"><a href="#Allow-Non-Local-IP-Binding" class="headerlink" title="Allow Non-Local IP Binding"></a>Allow Non-Local IP Binding</h4><p>[root@controller ~]# echo “net.ipv4.ip_nonlocal_bind &#x3D; 1” &gt;&gt;&#x2F;etc&#x2F;sysctl.conf<br>[root@controller ~]# sysctl -p<br>net.ipv4.ip_nonlocal_bind &#x3D; 1</p>
<h4 id="Add-HAProxy-To-The-Cluster"><a href="#Add-HAProxy-To-The-Cluster" class="headerlink" title="Add HAProxy To The Cluster"></a>Add HAProxy To The Cluster</h4><p>[root@controller1 ~]# pcs resource create lb-haproxy systemd:haproxy –clone<br>[root@controller1 ~]# pcs constraint order start vip then lb-haproxy-clone kind&#x3D;Optional<br>Adding vip lb-haproxy-clone (kind: Optional) (Options: first-action&#x3D;start then-action&#x3D;start)<br>[root@controller1 ~]# pcs constraint colocation add lb-haproxy-clone with vip</p>
<h3 id="Now-Take-the-Browser"><a href="#Now-Take-the-Browser" class="headerlink" title="Now, Take the Browser"></a>Now, Take the Browser</h3><p><a target="_blank" rel="noopener" href="http://192.168.220.20:1080/admin">http://192.168.220.20:1080/admin</a> <img src="http://www.qinuu.com/wp-content/uploads/2017/12/HAProxy-V1.gif"></p>
<h4 id="username-x2F-password"><a href="#username-x2F-password" class="headerlink" title="username&#x2F;password :"></a>username&#x2F;password :</h4><p>admin&#x2F;admin</p>
<h4 id="Add-RabbitMQTo-The-HAProxy"><a href="#Add-RabbitMQTo-The-HAProxy" class="headerlink" title="Add RabbitMQTo The HAProxy"></a>Add RabbitMQTo The HAProxy</h4><p>[root@controller1 ~]# echo ‘#RabbitMQ</p>
<blockquote>
<p>listen RabbitMQ-Server<br>bind controller:5673<br>mode tcp<br>balance roundrobin<br>option tcpka<br>timeout client  3h<br>timeout server  3h<br>option          clitcpka<br>server controller1 controller1:5672 check inter 5s rise 2 fall 3<br>server controller2 controller2:5672 check inter 5s rise 2 fall 3<br>server controller3 controller3:5672 check inter 5s rise 2 fall 3</p>
<p>listen RabbitMQ-Web<br>bind controller:15673<br>mode tcp<br>balance roundrobin<br>option tcpka<br>server controller1 controller1:15672 check inter 5s rise 2 fall 3<br>server controller2 controller2:15672 check inter 5s rise 2 fall 3<br>server controller3 controller3:15672 check inter 5s rise 2 fall 3<br>‘&gt;&gt;&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg<br>[root@controller1 ~]#<br>[root@controller1 ~]# systemctl restart haproxy.service</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/configure-vip-haproxy/" data-id="cl56jpsnu007saschaaq8gij4" data-title="Configure the VIP &amp; HAProxy" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pacemaker-cluster-stack" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/pacemaker-cluster-stack/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T03:33:28.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/pacemaker-cluster-stack/">Pacemaker Cluster Stack</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Install-Packages-On-Controller-Nodes"><a href="#Install-Packages-On-Controller-Nodes" class="headerlink" title="Install Packages On Controller Nodes"></a>Install Packages On Controller Nodes</h3><p>[root@controller ~]# yum install corosync pacemaker pcs fence-agents resource-agents -y</p>
<h3 id="Set-Up-the-Cluster"><a href="#Set-Up-the-Cluster" class="headerlink" title="Set-Up the Cluster"></a>Set-Up the Cluster</h3><p>[root@controller ~]# systemctl enable pcsd<br>[root@controller ~]# systemctl start pcsd</p>
<p>[root@controller ~]# echo myhaclusterpwd  passwd –stdin hacluster</p>
<p>[root@controller ~]# pcs cluster auth controller1 controller2 controller3  -u hacluster -p myhaclusterpwd –force</p>
<p>[root@controller1 ~]# pcs cluster setup –force –name my-cluster controller1 controller2 controller3<br>Destroying cluster on nodes: controller1, controller2, controller3…<br>controller1: Stopping Cluster (pacemaker)…<br>controller2: Stopping Cluster (pacemaker)…<br>controller3: Stopping Cluster (pacemaker)…<br>controller3: Successfully destroyed cluster<br>controller1: Successfully destroyed cluster<br>controller2: Successfully destroyed cluster</p>
<p>Sending ‘pacemaker_remote authkey’ to ‘controller1’, ‘controller2’, ‘controller3’<br>controller1: successful distribution of the file ‘pacemaker_remote authkey’<br>controller3: successful distribution of the file ‘pacemaker_remote authkey’<br>controller3: successful distribution of the file ‘pacemaker_remote authkey’<br>controller2: successful distribution of the file ‘pacemaker_remote authkey’<br>Sending cluster config files to the nodes…<br>controller1: Succeeded<br>controller2: Succeeded<br>controller3: Succeeded</p>
<p>Synchronizing pcsd certificates on nodes controller1, controller2, controller3…<br>controller3: Success<br>controller2: Success<br>controller1: Success<br>Restarting pcsd on the nodes in order to reload the certificates…</p>
<p>controller3: Success<br>controller2: Success<br>controller1: Success<br>[root@controller1 ~]# pcs cluster start –all<br>controller1: Starting Cluster…<br>controller2: Starting Cluster…<br>controller3: Starting Cluster…<br>[root@controller1 ~]# pcs cluster enable –all<br>controller1: Cluster Enabled<br>controller2: Cluster Enabled<br>controller3: Cluster Enabled<br>[root@controller1 ~]# pcs cluster status<br>Cluster Status:<br> Stack: unknown<br> Current DC: NONE<br> Last updated: Fri Dec 15 00:21:36 2017<br> Last change: Fri Dec 15 00:21:24 2017 by hacluster via crmd on controller1<br> 3 nodes configured<br> 0 resources configured<br>PCSD Status:<br>  controller3: Online<br>  controller2: Online<br>  controller1: Online</p>
<h3 id="Start-Corosync-On-Controllers"><a href="#Start-Corosync-On-Controllers" class="headerlink" title="Start Corosync On Controllers"></a>Start Corosync On Controllers</h3><p>[root@controller ~]# systemctl start corosync</p>
<p>[root@controller1 ~]# corosync-cfgtool -s<br>Printing ring status.<br>Local node ID 1<br>RING ID 0<br>        id      &#x3D; 192.168.220.21<br>        status  &#x3D; ring 0 active with no faults<br>[root@controller2 ~]# corosync-cfgtool -s<br>Printing ring status.<br>Local node ID 2<br>RING ID 0<br>        id      &#x3D; 192.168.220.22<br>        status  &#x3D; ring 0 active with no faults<br>[root@controller3 ~]# corosync-cfgtool -s<br>Printing ring status.<br>Local node ID 3<br>RING ID 0<br>        id      &#x3D; 192.168.220.23<br>        status  &#x3D; ring 0 active with no faults</p>
<p>[root@controller ~]# corosync-cmapctl runtime.totem.pg.mrp.srp.members<br>runtime.totem.pg.mrp.srp.members.1.config_version (u64) &#x3D; 0<br>runtime.totem.pg.mrp.srp.members.1.ip (str) &#x3D; r(0) ip(192.168.220.21)<br>runtime.totem.pg.mrp.srp.members.1.join_count (u32) &#x3D; 1<br>runtime.totem.pg.mrp.srp.members.1.status (str) &#x3D; joined<br>runtime.totem.pg.mrp.srp.members.2.config_version (u64) &#x3D; 0<br>runtime.totem.pg.mrp.srp.members.2.ip (str) &#x3D; r(0) ip(192.168.220.22)<br>runtime.totem.pg.mrp.srp.members.2.join_count (u32) &#x3D; 1<br>runtime.totem.pg.mrp.srp.members.2.status (str) &#x3D; joined<br>runtime.totem.pg.mrp.srp.members.3.config_version (u64) &#x3D; 0<br>runtime.totem.pg.mrp.srp.members.3.ip (str) &#x3D; r(0) ip(192.168.220.23)<br>runtime.totem.pg.mrp.srp.members.3.join_count (u32) &#x3D; 1<br>runtime.totem.pg.mrp.srp.members.3.status (str) &#x3D; joined</p>
<h3 id="Start-Pacemaker"><a href="#Start-Pacemaker" class="headerlink" title="Start Pacemaker"></a>Start Pacemaker</h3><p>[root@controller1 ~]# systemctl start pacemaker<br>[root@controller1 ~]# crm_mon -1<br>Stack: corosync<br>Current DC: controller1 (version 1.1.16-12.el7_4.5-94ff4df) - partition with quorum<br>Last updated: Fri Dec 15 00:34:25 2017<br>Last change: Fri Dec 15 00:21:45 2017 by hacluster via crmd on controller1</p>
<p>3 nodes configured<br>0 resources configured</p>
<p>Online: [ controller1 controller2 controller3 ]</p>
<p>No active resources</p>
<h3 id="Set-Basic-Cluster-Properties"><a href="#Set-Basic-Cluster-Properties" class="headerlink" title="Set Basic Cluster Properties"></a>Set Basic Cluster Properties</h3><p>[root@controller1 ~]# pcs property set pe-warn-series-max&#x3D;1000 \</p>
<blockquote>
<p>  pe-input-series-max&#x3D;1000 \<br>  pe-error-series-max&#x3D;1000 \<br>  cluster-recheck-interval&#x3D;5min<br>[root@controller1 ~]# pcs property set stonith-enabled&#x3D;false</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/pacemaker-cluster-stack/" data-id="cl56jpsu500dwasch652sgkll" data-title="Pacemaker Cluster Stack" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-rabbitmq-cluster-setup" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/rabbitmq-cluster-setup/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T02:38:42.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/rabbitmq-cluster-setup/">RabbitMQ Cluster Setup</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Install-RabbitMQ"><a href="#Install-RabbitMQ" class="headerlink" title="Install RabbitMQ"></a>Install RabbitMQ</h3><p>[root@controller1 ~]# yum install erlang rabbitmq-server -y<br>[root@controller2 ~]# yum install erlang rabbitmq-server -y<br>[root@controller3 ~]# yum install erlang rabbitmq-server -y</p>
<p>[root@controller1 ~]# systemctl enable rabbitmq-server.service<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;rabbitmq-server.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;rabbitmq-server.service.<br>[root@controller2 ~]# systemctl enable rabbitmq-server.service<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;rabbitmq-server.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;rabbitmq-server.service.<br>[root@controller3 ~]# systemctl enable rabbitmq-server.service<br>Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;rabbitmq-server.service to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;rabbitmq-server.service.</p>
<p>[root@controller1 ~]# systemctl start rabbitmq-server.service</p>
<p>[root@controller1 ~]# rabbitmq-plugins enable rabbitmq_management<br>The following plugins have been enabled:<br>  mochiweb<br>  webmachine<br>  rabbitmq_web_dispatch<br>  amqp_client<br>  rabbitmq_management_agent<br>  rabbitmq_management</p>
<p>Applying plugin configuration to rabbit@controller1… started 6 plugins.<br>[root@controller2 ~]# rabbitmq-plugins enable rabbitmq_management<br>The following plugins have been enabled:<br>  mochiweb<br>  webmachine<br>  rabbitmq_web_dispatch<br>  amqp_client<br>  rabbitmq_management_agent<br>  rabbitmq_management</p>
<p>Applying plugin configuration to rabbit@controller2… started 6 plugins.<br>[root@controller3 ~]# rabbitmq-plugins enable rabbitmq_management<br>The following plugins have been enabled:<br>  mochiweb<br>  webmachine<br>  rabbitmq_web_dispatch<br>  amqp_client<br>  rabbitmq_management_agent<br>  rabbitmq_management</p>
<p>Applying plugin configuration to rabbit@controller3… started 6 plugins.</p>
<h3 id="Configure-RabbitMQ-for-HA-queues"><a href="#Configure-RabbitMQ-for-HA-queues" class="headerlink" title="Configure RabbitMQ for HA queues"></a>Configure RabbitMQ for HA queues</h3><p>[root@controller1 ~]# scp &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie root@controller2:&#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie<br>.erlang.cookie                                                             100%   20    19.8KB&#x2F;s   00:00<br>[root@controller1 ~]# scp &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie root@controller3:&#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie<br>.erlang.cookie                                                             100%   20    34.2KB&#x2F;s   00:00    </p>
<h4 id="On-Each-Nodes"><a href="#On-Each-Nodes" class="headerlink" title="On Each Nodes"></a>On Each Nodes</h4><p># chown rabbitmq:rabbitmq &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie</p>
<h1 id="chmod-400-x2F-var-x2F-lib-x2F-rabbitmq-x2F-erlang-cookie"><a href="#chmod-400-x2F-var-x2F-lib-x2F-rabbitmq-x2F-erlang-cookie" class="headerlink" title="chmod 400 &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie"></a>chmod 400 &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie</h1><h1 id="systemctl-enable-rabbitmq-server-service"><a href="#systemctl-enable-rabbitmq-server-service" class="headerlink" title="systemctl enable rabbitmq-server.service"></a>systemctl enable rabbitmq-server.service</h1><h1 id="systemctl-start-rabbitmq-server-service"><a href="#systemctl-start-rabbitmq-server-service" class="headerlink" title="systemctl start rabbitmq-server.service"></a>systemctl start rabbitmq-server.service</h1><p>[root@controller1 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller1 …<br>[{nodes,[{disc,[rabbit@controller1]}]},<br> {running_nodes,[rabbit@controller1]},<br> {cluster_name,&lt;&lt;”rabbit@controller1”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller1,[]}]}]<br>[root@controller2 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller2 …<br>[{nodes,[{disc,[rabbit@controller2]}]},<br> {running_nodes,[rabbit@controller2]},<br> {cluster_name,&lt;&lt;”rabbit@controller2”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller2,[]}]}]<br>[root@controller3 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller3 …<br>[{nodes,[{disc,[rabbit@controller3]}]},<br> {running_nodes,[rabbit@controller3]},<br> {cluster_name,&lt;&lt;”rabbit@controller3”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller3,[]}]}]</p>
<h4 id="On-Other-Nodes"><a href="#On-Other-Nodes" class="headerlink" title="On Other Nodes"></a>On Other Nodes</h4><p>[root@controller2 ~]# rabbitmqctl stop_app<br>Stopping node rabbit@controller2 …<br>[root@controller3 ~]# rabbitmqctl stop_app<br>Stopping node rabbit@controller3 …</p>
<p>[root@controller2 ~]# rabbitmqctl join_cluster –ram rabbit@controller1<br>Clustering node rabbit@controller2 with rabbit@controller1 …<br>[root@controller3 ~]# rabbitmqctl join_cluster –ram rabbit@controller1<br>Clustering node rabbit@controller3 with rabbit@controller1 …</p>
<p>[root@controller2 ~]# rabbitmqctl start_app<br>Starting node rabbit@controller2 …<br>[root@controller3 ~]# rabbitmqctl start_app<br>Starting node rabbit@controller3 …</p>
<h4 id="Set-the-HA-Mode-Policy"><a href="#Set-the-HA-Mode-Policy" class="headerlink" title="Set the HA-Mode Policy"></a>Set the HA-Mode Policy</h4><p>[root@controller1 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller1 …<br>[{nodes,[{disc,[rabbit@controller1]},<br>         {ram,[rabbit@controller3,rabbit@controller2]}]},<br> {running_nodes,[rabbit@controller3,rabbit@controller2,rabbit@controller1]},<br> {cluster_name,&lt;&lt;”rabbit@controller1”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller3,[]},<br>          {rabbit@controller2,[]},<br>          {rabbit@controller1,[]}]}]<br>[root@controller2 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller2 …<br>[{nodes,[{disc,[rabbit@controller1]},<br>         {ram,[rabbit@controller3,rabbit@controller2]}]},<br> {running_nodes,[rabbit@controller3,rabbit@controller1,rabbit@controller2]},<br> {cluster_name,&lt;&lt;”rabbit@controller1”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller3,[]},<br>          {rabbit@controller1,[]},<br>          {rabbit@controller2,[]}]}]<br>[root@controller3 ~]# rabbitmqctl set_policy ha-all ‘^(?!amq\.).*‘ ‘{“ha-mode”: “all”}’<br>Setting policy “ha-all” for pattern “^(?!amq\\.).*“ to “{\“ha-mode\“: \“all\“}” with priority “0” …<br>[root@controller3 ~]#<br>[root@controller3 ~]#<br>[root@controller3 ~]# rabbitmqctl cluster_status<br>Cluster status of node rabbit@controller3 …<br>[{nodes,[{disc,[rabbit@controller1]},<br>         {ram,[rabbit@controller3,rabbit@controller2]}]},<br> {running_nodes,[rabbit@controller2,rabbit@controller1,rabbit@controller3]},<br> {cluster_name,&lt;&lt;”rabbit@controller1”&gt;&gt;},<br> {partitions,[]},<br> {alarms,[{rabbit@controller2,[]},<br>          {rabbit@controller1,[]},<br>          {rabbit@controller3,[]}]}]</p>
<p>[root@controller1 ~]# rabbitmqctl set_policy ha-all ‘^(?!amq\.).*‘ ‘{“ha-mode”: “all”}’<br>Setting policy “ha-all” for pattern “^(?!amq\\.).*“ to “{\“ha-mode\“: \“all\“}” with priority “0” …<br>[root@controller2 ~]# rabbitmqctl set_policy ha-all ‘^(?!amq\.).*‘ ‘{“ha-mode”: “all”}’<br>Setting policy “ha-all” for pattern “^(?!amq\\.).*“ to “{\“ha-mode\“: \“all\“}” with priority “0” …<br>[root@controller3 ~]# rabbitmqctl set_policy ha-all ‘^(?!amq\.).*‘ ‘{“ha-mode”: “all”}’<br>Setting policy “ha-all” for pattern “^(?!amq\\.).*“ to “{\“ha-mode\“: \“all\“}” with priority “0” …</p>
<h3 id="Now-Take-the-Browser"><a href="#Now-Take-the-Browser" class="headerlink" title="Now, Take the Browser"></a>Now, Take the Browser</h3><p><a target="_blank" rel="noopener" href="http://192.168.220.21:15672/">http://192.168.220.21:15672</a> <img src="http://www.qinuu.com/wp-content/uploads/2017/12/HA-RabbitMQ-V1.gif"></p>
<h4 id="username-x2F-password"><a href="#username-x2F-password" class="headerlink" title="username&#x2F;password :"></a>username&#x2F;password :</h4><p>guest&#x2F;guest</p>
<h3 id="Configure-OpenStack-services-to-use-RabbitMQ-HA-queues"><a href="#Configure-OpenStack-services-to-use-RabbitMQ-HA-queues" class="headerlink" title="Configure OpenStack services to use RabbitMQ HA queues"></a>Configure OpenStack services to use RabbitMQ HA queues</h3><p>transport_url &#x3D; rabbit:&#x2F;&#x2F;RABBIT_USER:RABBIT_PASS@rabbit1:5672,<br>RABBIT_USER:RABBIT_PASS@rabbit2:5672,RABBIT_USER:RABBIT_PASS@rabbit3:5672<br>rabbit_retry_interval&#x3D;1<br>rabbit_retry_backoff&#x3D;2<br>rabbit_max_retries&#x3D;0<br>rabbit_durable_queues&#x3D;true<br>rabbit_ha_queues&#x3D;true</p>
<h3 id="For-the-Old-Set-Up"><a href="#For-the-Old-Set-Up" class="headerlink" title="For the Old Set-Up"></a>For the Old Set-Up</h3><p># rabbitmqctl stop_app</p>
<h1 id="rabbitmqctl-reset"><a href="#rabbitmqctl-reset" class="headerlink" title="rabbitmqctl reset"></a>rabbitmqctl reset</h1><h1 id="rabbitmqctl-start-app"><a href="#rabbitmqctl-start-app" class="headerlink" title="rabbitmqctl start_app"></a>rabbitmqctl start_app</h1><h3 id="Create-RabbitMQ-Admin"><a href="#Create-RabbitMQ-Admin" class="headerlink" title="Create RabbitMQ Admin"></a>Create RabbitMQ Admin</h3><p>[root@controller1 ~]# rabbitmqctl  add_user admin admin<br>Creating user “admin” …<br>[root@controller1 ~]# rabbitmqctl  set_user_tags admin administrator<br>Setting tags for user “admin” to [administrator] …<br>[root@controller1 ~]# rabbitmqctl add_user openstack openstack<br>Creating user “openstack” …<br>[root@controller1 ~]# rabbitmqctl set_permissions openstack “.*“ “.*“ “.*“<br>Setting permissions for user “openstack” in vhost “&#x2F;“ …<br>[root@controller1 ~]# rabbitmqctl  set_user_tags openstack administrator<br>Setting tags for user “openstack” to [administrator] …<br>[root@controller1 ~]# systemctl restart rabbitmq-server.service</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/rabbitmq-cluster-setup/" data-id="cl56jpswa00g4asch2haleuir" data-title="RabbitMQ Cluster Setup" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-mariadb-galera-cluster" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/mariadb-galera-cluster/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T02:38:30.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/mariadb-galera-cluster/">MariaDB Galera Cluster</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Install-Database-On-Controller-Nodes"><a href="#Install-Database-On-Controller-Nodes" class="headerlink" title="Install Database On Controller Nodes"></a>Install Database On Controller Nodes</h3><p>[root@controller1 ~]# yum install memcached python-memcached -y<br>[root@controller1 ~]# yum install mariadb-galera-server mariadb-galera-common galera rsync -y</p>
<h3 id="Database-configuration-controller1"><a href="#Database-configuration-controller1" class="headerlink" title="Database configuration(controller1)"></a>Database configuration(controller1)</h3><p>[root@controller1 ~]# cat &#x2F;etc&#x2F;my.cnf<br>[mysqld]<br>datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql<br>socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock<br>user&#x3D;mysql<br>binlog_format&#x3D;ROW<br>bind-address&#x3D;192.168.220.21 # The management IP address of the controller node</p>
<h1 id="InnoDB-Configuration"><a href="#InnoDB-Configuration" class="headerlink" title="InnoDB Configuration"></a>InnoDB Configuration</h1><p>default_storage_engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>innodb_flush_log_at_trx_commit&#x3D;0<br>innodb_buffer_pool_size&#x3D;122M</p>
<p>!includedir &#x2F;etc&#x2F;my.cnf.d&#x2F;</p>
<p>[root@controller1 ~]# cat &#x2F;etc&#x2F;my.cnf.d&#x2F;galera.cnf  grep ^[^#].*<br>[mysqld]<br>binlog_format&#x3D;ROW<br>default-storage-engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>bind-address&#x3D;0.0.0.0<br>wsrep_on&#x3D;1<br>wsrep_provider&#x3D;&#x2F;usr&#x2F;lib64&#x2F;galera&#x2F;libgalera_smm.so<br>wsrep_cluster_name&#x3D;”my_wsrep_cluster”<br>wsrep_cluster_address&#x3D;”gcomm:&#x2F;&#x2F;controller1,controller2,controller3”<br>wsrep_node_name&#x3D;controller1<br>wsrep_node_address&#x3D;192.168.220.21<br>wsrep_slave_threads&#x3D;1<br>wsrep_certify_nonPK&#x3D;1<br>wsrep_max_ws_rows&#x3D;131072<br>wsrep_max_ws_size&#x3D;1073741824<br>wsrep_debug&#x3D;0<br>wsrep_convert_LOCK_to_trx&#x3D;0<br>wsrep_retry_autocommit&#x3D;1<br>wsrep_auto_increment_control&#x3D;1<br>wsrep_drupal_282555_workaround&#x3D;0<br>wsrep_causal_reads&#x3D;0<br>wsrep_notify_cmd&#x3D;<br>wsrep_sst_method&#x3D;rsync<br>wsrep_sst_auth&#x3D;root:</p>
<h3 id="Database-configuration-controller2-controller3"><a href="#Database-configuration-controller2-controller3" class="headerlink" title="Database configuration(controller2,controller3)"></a>Database configuration(controller2,controller3)</h3><p>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;my.cnf controller2:&#x2F;etc&#x2F;<br>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;my.cnf.d&#x2F;galera.cnf controller2:&#x2F;etc&#x2F;my.cnf.d&#x2F;<br>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;my.cnf controller3:&#x2F;etc&#x2F;<br>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;my.cnf.d&#x2F;galera.cnf controller3:&#x2F;etc&#x2F;my.cnf.d&#x2F;</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;my.cnf<br>[mysqld]<br>datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql<br>socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock<br>user&#x3D;mysql<br>binlog_format&#x3D;ROW<br>bind-address&#x3D;192.168.220.22 # The management IP address of the controller node</p>
<h1 id="InnoDB-Configuration-1"><a href="#InnoDB-Configuration-1" class="headerlink" title="InnoDB Configuration"></a>InnoDB Configuration</h1><p>default_storage_engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>innodb_flush_log_at_trx_commit&#x3D;0<br>innodb_buffer_pool_size&#x3D;122M</p>
<p>!includedir &#x2F;etc&#x2F;my.cnf.d&#x2F;</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;my.cnf.d&#x2F;galera.cnf  grep ^[^#].*<br>[mysqld]<br>binlog_format&#x3D;ROW<br>default-storage-engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>bind-address&#x3D;0.0.0.0<br>wsrep_on&#x3D;1<br>wsrep_provider&#x3D;&#x2F;usr&#x2F;lib64&#x2F;galera&#x2F;libgalera_smm.so<br>wsrep_cluster_name&#x3D;”my_wsrep_cluster”<br>wsrep_cluster_address&#x3D;”gcomm:&#x2F;&#x2F;controller1,controller2,controller3”<br>wsrep_node_name&#x3D;controller2<br>wsrep_node_address&#x3D;192.168.220.22<br>wsrep_slave_threads&#x3D;1<br>wsrep_certify_nonPK&#x3D;1<br>wsrep_max_ws_rows&#x3D;131072<br>wsrep_max_ws_size&#x3D;1073741824<br>wsrep_debug&#x3D;0<br>wsrep_convert_LOCK_to_trx&#x3D;0<br>wsrep_retry_autocommit&#x3D;1<br>wsrep_auto_increment_control&#x3D;1<br>wsrep_drupal_282555_workaround&#x3D;0<br>wsrep_causal_reads&#x3D;0<br>wsrep_notify_cmd&#x3D;<br>wsrep_sst_method&#x3D;rsync<br>wsrep_sst_auth&#x3D;root:</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;my.cnf<br>[mysqld]<br>datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql<br>socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock<br>user&#x3D;mysql<br>binlog_format&#x3D;ROW<br>bind-address&#x3D;192.168.220.23 # The management IP address of the controller node</p>
<h1 id="InnoDB-Configuration-2"><a href="#InnoDB-Configuration-2" class="headerlink" title="InnoDB Configuration"></a>InnoDB Configuration</h1><p>default_storage_engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>innodb_flush_log_at_trx_commit&#x3D;0<br>innodb_buffer_pool_size&#x3D;122M</p>
<p>!includedir &#x2F;etc&#x2F;my.cnf.d&#x2F;</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;my.cnf.d&#x2F;galera.cnf  grep ^[^#].*<br>[mysqld]<br>binlog_format&#x3D;ROW<br>default-storage-engine&#x3D;innodb<br>innodb_autoinc_lock_mode&#x3D;2<br>bind-address&#x3D;0.0.0.0<br>wsrep_on&#x3D;1<br>wsrep_provider&#x3D;&#x2F;usr&#x2F;lib64&#x2F;galera&#x2F;libgalera_smm.so<br>wsrep_cluster_name&#x3D;”my_wsrep_cluster”<br>wsrep_cluster_address&#x3D;”gcomm:&#x2F;&#x2F;controller1,controller2,controller3”<br>wsrep_node_name&#x3D;controller3<br>wsrep_node_address&#x3D;192.168.220.23<br>wsrep_slave_threads&#x3D;1<br>wsrep_certify_nonPK&#x3D;1<br>wsrep_max_ws_rows&#x3D;131072<br>wsrep_max_ws_size&#x3D;1073741824<br>wsrep_debug&#x3D;0<br>wsrep_convert_LOCK_to_trx&#x3D;0<br>wsrep_retry_autocommit&#x3D;1<br>wsrep_auto_increment_control&#x3D;1<br>wsrep_drupal_282555_workaround&#x3D;0<br>wsrep_causal_reads&#x3D;0<br>wsrep_notify_cmd&#x3D;<br>wsrep_sst_method&#x3D;rsync<br>wsrep_sst_auth&#x3D;root:</p>
<h3 id="Database-Management"><a href="#Database-Management" class="headerlink" title="Database Management"></a>Database Management</h3><h5 id="Initialize-the-Primary-Component-on-one-cluster-node"><a href="#Initialize-the-Primary-Component-on-one-cluster-node" class="headerlink" title="Initialize the Primary Component on one cluster node"></a>Initialize the Primary Component on one cluster node</h5><p>[root@controller1 ~]# &#x2F;usr&#x2F;libexec&#x2F;mysqld –wsrep-new-cluster –user&#x3D;root &amp;</p>
<h5 id="Start-the-database-server-on-all-other-cluster-nodes"><a href="#Start-the-database-server-on-all-other-cluster-nodes" class="headerlink" title="Start the database server on all other cluster nodes"></a>Start the database server on all other cluster nodes</h5><p>[root@controller2 ~]# systemctl start mariadb<br>[root@controller3 ~]# systemctl start mariadb</p>
<h5 id="Check-MaribDB-Cluster"><a href="#Check-MaribDB-Cluster" class="headerlink" title="Check MaribDB Cluster"></a>Check MaribDB Cluster</h5><h6 id="The-Key-Value"><a href="#The-Key-Value" class="headerlink" title="The Key Value :"></a>The Key Value :</h6><ul>
<li>wsrep_connected ON</li>
<li>wsrep_cluster_size 3</li>
<li>wsrep_local_index 0 (controller1 : 0 controller2 : 1 controller3 : 2)</li>
<li>wsrep_incoming_addresses 192.168.220.21:3306,192.168.220.22:3306,192.168.220.23:3306</li>
</ul>
<p>[root@controller1 ~]# mysql -uroot -proot -e “show status like ‘wsrep_%’”<br>+——————————+————————————————————-+<br> Variable_name                 Value<br>+——————————+————————————————————-+<br> wsrep_apply_oooe              0.000000<br> wsrep_apply_oool              0.000000<br> wsrep_apply_window            0.000000<br> wsrep_causal_reads            0<br> wsrep_cert_deps_distance      0.000000<br> wsrep_cert_index_size         0<br> wsrep_cert_interval           0.000000<br> wsrep_cluster_conf_id         3<br> wsrep_cluster_size            3<br> wsrep_cluster_state_uuid      37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_cluster_status          Primary<br> wsrep_commit_oooe             0.000000<br> wsrep_commit_oool             0.000000<br> wsrep_commit_window           0.000000<br> wsrep_connected               ON<br> wsrep_desync_count            0<br> wsrep_evs_delayed<br> wsrep_evs_evict_list<br> wsrep_evs_repl_latency        0&#x2F;0&#x2F;0&#x2F;0&#x2F;0<br> wsrep_evs_state               OPERATIONAL<br> wsrep_flow_control_paused     0.000000<br> wsrep_flow_control_paused_ns  0<br> wsrep_flow_control_recv       0<br> wsrep_flow_control_sent       0<br> wsrep_gcomm_uuid              37644373-e137-11e7-8fef-c76eb92175c6<br> wsrep_incoming_addresses      192.168.220.21:3306,192.168.220.22:3306,192.168.220.23:3306<br> wsrep_last_committed          0<br> wsrep_local_bf_aborts         0<br> wsrep_local_cached_downto     18446744073709551615<br> wsrep_local_cert_failures     0<br> wsrep_local_commits           0<br> wsrep_local_index             0<br> wsrep_local_recv_queue        0<br> wsrep_local_recv_queue_avg    0.100000<br> wsrep_local_recv_queue_max    2<br> wsrep_local_recv_queue_min    0<br> wsrep_local_replays           0<br> wsrep_local_send_queue        0<br> wsrep_local_send_queue_avg    0.000000<br> wsrep_local_send_queue_max    1<br> wsrep_local_send_queue_min    0<br> wsrep_local_state             4<br> wsrep_local_state_comment     Synced<br> wsrep_local_state_uuid        37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_protocol_version        7<br> wsrep_provider_name           Galera<br> wsrep_provider_vendor         Codership Oy wsrep_provider_version        3.16(r5c765eb)<br> wsrep_ready                   ON<br> wsrep_received                10<br> wsrep_received_bytes          794<br> wsrep_repl_data_bytes         0<br> wsrep_repl_keys               0<br> wsrep_repl_keys_bytes         0<br> wsrep_repl_other_bytes        0<br> wsrep_replicated              0<br> wsrep_replicated_bytes        0<br> wsrep_thread_count            2<br>+——————————+————————————————————-+<br>[root@controller2 ~]# mysql -uroot -proot -e “show status like ‘wsrep_%’”<br>+——————————+————————————————————-+<br> Variable_name                 Value<br>+——————————+————————————————————-+<br> wsrep_apply_oooe              0.000000<br> wsrep_apply_oool              0.000000<br> wsrep_apply_window            0.000000<br> wsrep_causal_reads            0<br> wsrep_cert_deps_distance      0.000000<br> wsrep_cert_index_size         0<br> wsrep_cert_interval           0.000000<br> wsrep_cluster_conf_id         3<br> wsrep_cluster_size            3<br> wsrep_cluster_state_uuid      37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_cluster_status          Primary<br> wsrep_commit_oooe             0.000000<br> wsrep_commit_oool             0.000000<br> wsrep_commit_window           0.000000<br> wsrep_connected               ON<br> wsrep_desync_count            0<br> wsrep_evs_delayed<br> wsrep_evs_evict_list<br> wsrep_evs_repl_latency        0.000204825&#x2F;0.00047307&#x2F;0.000741314&#x2F;0.000268244&#x2F;2<br> wsrep_evs_state               OPERATIONAL<br> wsrep_flow_control_paused     0.000000<br> wsrep_flow_control_paused_ns  0<br> wsrep_flow_control_recv       0<br> wsrep_flow_control_sent       0<br> wsrep_gcomm_uuid              781401a8-e137-11e7-bba3-9e3f83e88f32<br> wsrep_incoming_addresses      192.168.220.21:3306,192.168.220.22:3306,192.168.220.23:3306<br> wsrep_last_committed          0<br> wsrep_local_bf_aborts         0<br> wsrep_local_cached_downto     18446744073709551615<br> wsrep_local_cert_failures     0<br> wsrep_local_commits           0<br> wsrep_local_index             1<br> wsrep_local_recv_queue        0<br> wsrep_local_recv_queue_avg    0.000000<br> wsrep_local_recv_queue_max    1<br> wsrep_local_recv_queue_min    0<br> wsrep_local_replays           0<br> wsrep_local_send_queue        0<br> wsrep_local_send_queue_avg    0.000000<br> wsrep_local_send_queue_max    1<br> wsrep_local_send_queue_min    0<br> wsrep_local_state             4<br> wsrep_local_state_comment     Synced<br> wsrep_local_state_uuid        37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_protocol_version        7<br> wsrep_provider_name           Galera<br> wsrep_provider_vendor         Codership Oy wsrep_provider_version        3.16(r5c765eb)<br> wsrep_ready                   ON<br> wsrep_received                4<br> wsrep_received_bytes          529<br> wsrep_repl_data_bytes         0<br> wsrep_repl_keys               0<br> wsrep_repl_keys_bytes         0<br> wsrep_repl_other_bytes        0<br> wsrep_replicated              0<br> wsrep_replicated_bytes        0<br> wsrep_thread_count            2<br>+——————————+————————————————————-+<br>[root@controller3 ~]# mysql -uroot -proot -e “show status like ‘wsrep_%’”<br>+——————————+————————————————————-+<br> Variable_name                 Value<br>+——————————+————————————————————-+<br> wsrep_apply_oooe              0.000000<br> wsrep_apply_oool              0.000000<br> wsrep_apply_window            0.000000<br> wsrep_causal_reads            0<br> wsrep_cert_deps_distance      0.000000<br> wsrep_cert_index_size         0<br> wsrep_cert_interval           0.000000<br> wsrep_cluster_conf_id         3<br> wsrep_cluster_size            3<br> wsrep_cluster_state_uuid      37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_cluster_status          Primary<br> wsrep_commit_oooe             0.000000<br> wsrep_commit_oool             0.000000<br> wsrep_commit_window           0.000000<br> wsrep_connected               ON<br> wsrep_desync_count            0<br> wsrep_evs_delayed<br> wsrep_evs_evict_list<br> wsrep_evs_repl_latency        0.000224679&#x2F;0.000465885&#x2F;0.000643407&#x2F;0.000164076&#x2F;5<br> wsrep_evs_state               OPERATIONAL<br> wsrep_flow_control_paused     0.000000<br> wsrep_flow_control_paused_ns  0<br> wsrep_flow_control_recv       0<br> wsrep_flow_control_sent       0<br> wsrep_gcomm_uuid              7ce71d07-e137-11e7-b720-baa5cd647a15<br> wsrep_incoming_addresses      192.168.220.21:3306,192.168.220.22:3306,192.168.220.23:3306<br> wsrep_last_committed          0<br> wsrep_local_bf_aborts         0<br> wsrep_local_cached_downto     18446744073709551615<br> wsrep_local_cert_failures     0<br> wsrep_local_commits           0<br> wsrep_local_index             2<br> wsrep_local_recv_queue        0<br> wsrep_local_recv_queue_avg    0.000000<br> wsrep_local_recv_queue_max    1<br> wsrep_local_recv_queue_min    0<br> wsrep_local_replays           0<br> wsrep_local_send_queue        0<br> wsrep_local_send_queue_avg    0.333333<br> wsrep_local_send_queue_max    2<br> wsrep_local_send_queue_min    0<br> wsrep_local_state             4<br> wsrep_local_state_comment     Synced<br> wsrep_local_state_uuid        37649504-e137-11e7-815b-1ec404fbf23e<br> wsrep_protocol_version        7<br> wsrep_provider_name           Galera<br> wsrep_provider_vendor         Codership Oy wsrep_provider_version        3.16(r5c765eb)<br> wsrep_ready                   ON<br> wsrep_received                3<br> wsrep_received_bytes          311<br> wsrep_repl_data_bytes         0<br> wsrep_repl_keys               0<br> wsrep_repl_keys_bytes         0<br> wsrep_repl_other_bytes        0<br> wsrep_replicated              0<br> wsrep_replicated_bytes        0<br> wsrep_thread_count            2<br>+——————————+————————————————————-+ </p>
<h5 id="Test-MaribDB-Cluster"><a href="#Test-MaribDB-Cluster" class="headerlink" title="Test MaribDB Cluster"></a>Test MaribDB Cluster</h5><p>[root@controller1 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> information_schema<br> mysql<br> performance_schema<br>+——————–+<br>[root@controller2 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> information_schema<br> mysql<br> performance_schema<br>+——————–+<br>[root@controller3 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> information_schema<br> mysql<br> performance_schema<br>+——————–+<br>[root@controller1 ~]# mysql -uroot -proot -e “create database galera_test”<br>[root@controller1 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> galera_test<br> information_schema<br> mysql<br> performance_schema<br>+——————–+<br>[root@controller2 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> galera_test<br> information_schema<br> mysql<br> performance_schema<br>+——————–+<br>[root@controller3 ~]# mysql -uroot -proot -e “show databases”<br>+——————–+<br> Database<br>+——————–+<br> galera_test<br> information_schema<br> mysql<br> performance_schema<br>+——————–+</p>
<h3 id="Database-Management-1"><a href="#Database-Management-1" class="headerlink" title="Database Management"></a>Database Management</h3><p>echo ‘<br>MYSQL_USERNAME&#x3D;”clustercheck_user”<br>MYSQL_PASSWORD&#x3D;”my_clustercheck_password”<br>MYSQL_HOST&#x3D;”localhost”<br>MYSQL_PORT&#x3D;”3306”<br>‘ &gt; &#x2F;etc&#x2F;sysconfig&#x2F;clustercheck</p>
<h3 id="Grant-the-clustercheck-user"><a href="#Grant-the-clustercheck-user" class="headerlink" title="Grant the clustercheck user"></a>Grant the clustercheck user</h3><p>[root@controller1 ~]# mysql -uroot -proot -e “GRANT PROCESS ON *.* TO ‘clustercheck_user‘@’localhost’ IDENTIFIED BY ‘my_clustercheck_password’;FLUSH PRIVILEGES;”<br>[root@controller1 ~]# mysql -uroot -proot -e “SELECT User, Host, Password FROM mysql.user;”<br>+——————-+———–+——————————————-+<br> User               Host       Password<br>+——————-+———–+——————————————-+<br> root               localhost  *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B<br> root               127.0.0.1  *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B<br> root               ::1        *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B<br> clustercheck_user  localhost  *B7ECF4F5C3B1DDB87695D91C5D27631AEC569993<br>+——————-+———–+——————————————-+</p>
<h3 id="Create-a-configuration-file-for-the-HAProxy-monitor-service"><a href="#Create-a-configuration-file-for-the-HAProxy-monitor-service" class="headerlink" title="Create a configuration file for the HAProxy monitor service"></a>Create a configuration file for the HAProxy monitor service</h3><p>echo ‘<br>service galera-monitor<br>{<br>   port &#x3D; 9200<br>   disable &#x3D; no<br>   socket_type &#x3D; stream<br>   protocol &#x3D; tcp<br>   wait &#x3D; no<br>   user &#x3D; root<br>   group &#x3D; root<br>   groups &#x3D; yes<br>   server &#x3D; &#x2F;usr&#x2F;bin&#x2F;clustercheck<br>   type &#x3D; UNLISTED<br>   per_source &#x3D; UNLIMITED<br>   log_on_success &#x3D;<br>   log_on_failure &#x3D; HOST<br>   flags &#x3D; REUSE<br>}<br>‘ &gt; &#x2F;etc&#x2F;xinetd.d&#x2F;galera-monitor</p>
<h3 id="Create-OpenStack-Users-amp-Databases"><a href="#Create-OpenStack-Users-amp-Databases" class="headerlink" title="Create OpenStack Users &amp; Databases"></a>Create OpenStack Users &amp; Databases</h3><p>[root@controller1 ~]# mysql -u root -proot -e “</p>
<blockquote>
<p>create database keystone;<br>grant all privileges on keystone.* to ‘keystone‘@’localhost’ identified by ‘keystone’;<br>grant all privileges on keystone.* to ‘keystone‘@’%’ identified by ‘keystone’;<br>create database glance;<br>grant all privileges on glance.* to ‘glance‘@’localhost’ identified by ‘glance’;<br>grant all privileges on glance.* to ‘glance‘@’%’ identified by ‘glance’;</p>
<p>create database nova;<br>grant all privileges on nova.* to ‘nova‘@’localhost’ identified by ‘nova’;<br>grant all privileges on nova.* to ‘nova‘@’%’ identified by ‘nova’;<br>create database nova_api;<br>grant all privileges on nova_api.* to ‘nova‘@’localhost’ identified by ‘nova’;<br>grant all privileges on nova_api.* to ‘nova‘@’%’ identified by ‘nova’;<br>create database nova_cell0;<br>grant all privileges on nova_cell0.* to ‘nova‘@’localhost’ identified by ‘nova’;<br>grant all privileges on nova_cell0.* to ‘nova‘@’%’ identified by ‘nova’;</p>
<p>create database neutron;<br>grant all privileges on neutron.* to ‘neutron‘@’localhost’ identified by ‘neutron’;<br>grant all privileges on neutron.* to ‘neutron‘@’%’ identified by ‘neutron’;</p>
<p>flush privileges;<br>select user,host from mysql.user;<br>show databases;<br>“<br>“<br>+——————-+———–+<br> user               host<br>+——————-+———–+<br> glance             %<br> keystone           %<br> neutron            %<br> nova               %<br> root               127.0.0.1<br> root               ::1<br> clustercheck_user  localhost<br> glance             localhost<br> keystone           localhost<br> neutron            localhost<br> nova               localhost<br> root               localhost<br>+——————-+———–+<br>+——————–+<br> Database<br>+——————–+<br> galera_test<br> glance<br> information_schema<br> keystone<br> mysql<br> neutron<br> nova<br> nova_api<br> nova_cell0<br> performance_schema<br>+——————–+</p>
</blockquote>
<h3 id="Start-the-xinetd-daemon-for-clustercheck"><a href="#Start-the-xinetd-daemon-for-clustercheck" class="headerlink" title="Start the xinetd daemon for clustercheck"></a>Start the xinetd daemon for clustercheck</h3><p>[root@controller1 ~]# systemctl daemon-reload<br>[root@controller1 ~]# systemctl enable xinetd<br>[root@controller1 ~]# systemctl start xinetd</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/mariadb-galera-cluster/" data-id="cl56jpssm00cgaschbiv9fw7b" data-title="MariaDB Galera Cluster" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-memcached-multiple-servers" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/memcached-multiple-servers/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T02:38:14.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/memcached-multiple-servers/">Memcached on Multiple Servers</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Install-the-packages"><a href="#Install-the-packages" class="headerlink" title="Install the packages"></a>Install the packages</h3><p># yum install memcached python-memcached</p>
<h3 id="Edit-the-x2F-etc-x2F-sysconfig-x2F-memcached-file"><a href="#Edit-the-x2F-etc-x2F-sysconfig-x2F-memcached-file" class="headerlink" title="Edit the &#x2F;etc&#x2F;sysconfig&#x2F;memcached file"></a>Edit the &#x2F;etc&#x2F;sysconfig&#x2F;memcached file</h3><p>[root@controller1 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;memcached<br>PORT&#x3D;”11211”<br>USER&#x3D;”memcached”<br>MAXCONN&#x3D;”1024”<br>CACHESIZE&#x3D;”64”<br>OPTIONS&#x3D;”-l 127.0.0.1,::1,controller”<br>Memcached_servers &#x3D; controller1:11211,controller2:11211,controller3:11211</p>
<h3 id="PCS-Create-Memcached"><a href="#PCS-Create-Memcached" class="headerlink" title="PCS Create Memcached"></a>PCS Create Memcached</h3><p># pcs resource delete memcached –force</p>
<h1 id="pcs-resource-create-memcached-systemd-memcached-–clone-interleave-x3D-true"><a href="#pcs-resource-create-memcached-systemd-memcached-–clone-interleave-x3D-true" class="headerlink" title="pcs resource create memcached systemd:memcached –clone interleave&#x3D;true"></a>pcs resource create memcached systemd:memcached –clone interleave&#x3D;true</h1><h1 id="pcs-status"><a href="#pcs-status" class="headerlink" title="pcs status"></a>pcs status</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/memcached-multiple-servers/" data-id="cl56jpst300ctasch9jgfgojv" data-title="Memcached on Multiple Servers" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-install-centos-configure" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/08/install-centos-configure/" class="article-date">
  <time class="dt-published" datetime="2017-12-08T02:06:42.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/08/install-centos-configure/">Install CentOS &amp; Configure</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Firewall-Configure"><a href="#Firewall-Configure" class="headerlink" title="Firewall Configure"></a>Firewall Configure</h3><p>[root@localhost ~]# systemctl stop firewalld.service<br>[root@localhost ~]# systemctl disable firewalld.service<br>[root@localhost ~]# firewall-cmd –state</p>
<h3 id="Disable-SELinux"><a href="#Disable-SELinux" class="headerlink" title="Disable SELinux"></a>Disable SELinux</h3><p>[root@localhost ~]# sed -i ‘&#x2F;^SELINUX&#x3D;.*&#x2F;c SELINUX&#x3D;disabled’ &#x2F;etc&#x2F;selinux&#x2F;config<br>[root@localhost ~]# sed -i ‘s&#x2F;^SELINUXTYPE&#x3D;.*&#x2F;SELINUXTYPE&#x3D;disabled&#x2F;g’ &#x2F;etc&#x2F;selinux&#x2F;config<br>[root@localhost ~]# grep –color&#x3D;auto ‘^SELINUX’ &#x2F;etc&#x2F;selinux&#x2F;config<br>[root@localhost ~]# setenforce 0</p>
<h3 id="Synchronize-time"><a href="#Synchronize-time" class="headerlink" title="Synchronize time"></a>Synchronize time</h3><p>Refer to “CLOUD COMPUTING —&gt; OpenStack High Availability —&gt; 3.Create Local NTP”</p>
<h3 id="Set-HostName"><a href="#Set-HostName" class="headerlink" title="Set HostName"></a>Set HostName</h3><p>[root@localhost ~]# hostnamectl set-hostname controller1<br>[root@localhost ~]# hostnamectl set-hostname controller2<br>[root@localhost ~]# hostnamectl set-hostname controller3<br>[root@localhost ~]# hostnamectl set-hostname compute01<br>[root@localhost ~]# hostnamectl set-hostname compute02</p>
<h3 id="Network-Configure"><a href="#Network-Configure" class="headerlink" title="Network Configure"></a>Network Configure</h3><p>192.168.200.0Host-only 192.168.220.0NAT</p>
<h4 id="Controller1"><a href="#Controller1" class="headerlink" title="Controller1"></a>Controller1</h4><p>[root@controller1 ~]# ls -al &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-*<br>-rw-r–r–  1 root root 369 Dec 13 22:22 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>-rw-r–r–  1 root root 369 Dec 13 22:23 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>-rw-r–r–  1 root root 326 Dec 13 22:26 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>-rw-r–r–  1 root root 326 Dec 13 22:28 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>-rw-r–r–. 1 root root 254 May  3  2017 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-lo</p>
<p>Update the 1st network adapter:</p>
<p>[root@controller1 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>UUID&#x3D;9eb00433-c8b9-4be2-af53-50cab2247226<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.11<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 2nd network adapter:</p>
<p>[root@controller1 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens37<br>UUID&#x3D;cf7a62c9-e135-4488-b252-99717664941c<br>DEVICE&#x3D;ens37<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.21<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 3rd network adapter:</p>
<p>[root@controller1 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens38<br>UUID&#x3D;b077534d-3154-43ca-a240-ac811f255f42<br>DEVICE&#x3D;ens38<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.11<br>NETMASK&#x3D;255.255.255.0</p>
<p>Update the 4th network adapter:</p>
<p>[root@controller1 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens39<br>UUID&#x3D;ea5e0f92-8f8c-457f-a693-f946c623d0e7<br>DEVICE&#x3D;ens39<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.21<br>NETMASK&#x3D;255.255.255.0</p>
<h4 id="Controller2"><a href="#Controller2" class="headerlink" title="Controller2"></a>Controller2</h4><p>[root@controller2 ~]# ls -al &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-*<br>-rw-r–r–  1 root root 369 Dec 13 22:22 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>-rw-r–r–  1 root root 369 Dec 13 22:23 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>-rw-r–r–  1 root root 326 Dec 13 22:26 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>-rw-r–r–  1 root root 326 Dec 13 22:28 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>-rw-r–r–. 1 root root 254 May  3  2017 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-lo</p>
<p>Update the 1st network adapter:</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>UUID&#x3D;14a0d64d-bca2-4b37-ac1d-460897567fff<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.12<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 2nd network adapter:</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens37<br>UUID&#x3D;c382316f-97d8-4e3f-a82b-b48cd6d0d025<br>DEVICE&#x3D;ens37<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.22<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 3rd network adapter:</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens38<br>UUID&#x3D;f727a6f1-0ae0-4c0d-aa54-fbaefb3570c7<br>DEVICE&#x3D;ens38<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.12<br>NETMASK&#x3D;255.255.255.0</p>
<p>Update the 4th network adapter:</p>
<p>[root@controller2 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens39<br>UUID&#x3D;b56c3af9-2844-47e3-9e30-ef078640b2f1<br>DEVICE&#x3D;ens39<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.22<br>NETMASK&#x3D;255.255.255.0</p>
<h4 id="Controller3"><a href="#Controller3" class="headerlink" title="Controller3"></a>Controller3</h4><p>[root@controller3 ~]# ls -al &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-*<br>-rw-r–r–  1 root root 369 Dec 13 22:22 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>-rw-r–r–  1 root root 369 Dec 13 22:23 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>-rw-r–r–  1 root root 326 Dec 13 22:26 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>-rw-r–r–  1 root root 326 Dec 13 22:28 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>-rw-r–r–. 1 root root 254 May  3  2017 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-lo</p>
<p>Update the 1st network adapter:</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>UUID&#x3D;5ca30d63-789d-4df4-9f98-29aa74945e1b<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.13<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 2nd network adapter:</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens37<br>UUID&#x3D;8cb6cd8b-304f-4148-96bb-326976276d17<br>DEVICE&#x3D;ens37<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.23<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 3rd network adapter:</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens38<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens38<br>UUID&#x3D;9d8e2ebb-ded2-4d51-8b77-072ccfc269c3<br>DEVICE&#x3D;ens38<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.13<br>NETMASK&#x3D;255.255.255.0</p>
<p>Update the 4th network adapter:</p>
<p>[root@controller3 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens39<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens39<br>UUID&#x3D;639fdbe3-b6f4-4f8d-b988-b9e01ef5041e<br>DEVICE&#x3D;ens39<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.23<br>NETMASK&#x3D;255.255.255.0</p>
<h4 id="Compute01"><a href="#Compute01" class="headerlink" title="Compute01"></a>Compute01</h4><p>[root@compute01 ~]# ls -al &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-*<br>-rw-r–r–  1 root root 369 Dec 13 22:22 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>-rw-r–r–  1 root root 326 Dec 13 22:23 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>-rw-r–r–. 1 root root 254 May  3  2017 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-lo</p>
<p>Update the 1st network adapter:</p>
<p>[root@compute01 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>UUID&#x3D;fdab3eb4-d1c6-46e4-a09e-f3cff2c23514<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.51<br>NETMASK&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 2nd network adapter:</p>
<p>[root@compute01 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens37<br>UUID&#x3D;0157d35c-ced3-4c0c-a519-48cb2a11e8db<br>DEVICE&#x3D;ens37<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.51<br>NETMASK&#x3D;255.255.255.0</p>
<h4 id="Compute02"><a href="#Compute02" class="headerlink" title="Compute02"></a>Compute02</h4><p>[root@compute02 ~]# ls -al &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-*<br>-rw-r–r–  1 root root 369 Dec 13 22:22 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>-rw-r–r–  1 root root 326 Dec 13 22:23 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>-rw-r–r–. 1 root root 254 May  3  2017 &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-lo</p>
<p>Update the 1st network adapter:</p>
<p>[root@compute02 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>UUID&#x3D;e8cf9148-b8dd-4879-8851-f523bb0cefd0<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.220.61<br>NETMAKE&#x3D;255.255.255.0<br>GATEWAY&#x3D;192.168.220.2<br>DNS1&#x3D;114.114.114.114</p>
<p>Update the 2nd network adapter:</p>
<p>[root@compute02 ~]# cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens37<br>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens37<br>UUID&#x3D;308add2b-09df-495f-b706-5afbdff0ff9e<br>DEVICE&#x3D;ens37<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.200.61<br>NETMAKE&#x3D;255.255.255.0</p>
<h3 id="Update-HostName"><a href="#Update-HostName" class="headerlink" title="Update HostName"></a>Update HostName</h3><p>[root@controller1 ~]# cat &#x2F;etc&#x2F;hosts<br>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<br>192.168.220.20 controller # virtual IP<br>192.168.220.21 controller1<br>192.168.220.22 controller2<br>192.168.220.23 controller3<br>192.168.220.51 compute01<br>192.168.220.61 compute02</p>
<h3 id="Controller-SSH"><a href="#Controller-SSH" class="headerlink" title="Controller SSH"></a>Controller SSH</h3><p>[root@controller1 ~]# ssh-keygen -t rsa -P “” -f ~&#x2F;.ssh&#x2F;id_rsa<br>Generating public&#x2F;private rsa key pair.<br>Created directory ‘&#x2F;root&#x2F;.ssh’.<br>Your identification has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.<br>Your public key has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub.<br>The key fingerprint is:<br>SHA256:RJz627PplvqRVorpdiRPXLZ15aiQD&#x2F;YruvXT&#x2F;Cu1sSo root@controller1<br>The key s randomart image is:<br>+—[RSA 2048]—-+<br>       …<br>       .o       .<br>       ..  .   o.<br>      ..  &#x3D; o o o<br>       .So B.+ .<br>        oo++&#x3D;  o<br>        oB*. +. +<br>       .ooOEo.oo<br>       .&#x3D;O&#x3D;+ooooo<br>+—-[SHA256]—–+<br>[root@controller1 ~]# ssh-copy-id -i ~&#x2F;.ssh&#x2F;id_rsa.pub root@controller2<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: Source of key(s) to be installed: “&#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub”<br>The authenticity of host ‘controller2 (192.168.220.22)’ can’t be established.<br>ECDSA key fingerprint is SHA256:Q5vLVMvx0+FWYxqM263f4&#x2F;&#x2F;dH72IwEgT&#x2F;bWeOIlwTfY.<br>ECDSA key fingerprint is MD5:b5:6a:fb:3f:be:98:f7:d9:71:4e:d1:89:c4:7f:8f:00.<br>Are you sure you want to continue connecting (yes&#x2F;no)? yes<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: 1 key(s) remain to be installed – if you are prompted now it is to install the new keys<br>root@controller2’s password: </p>
<p>Number of key(s) added: 1</p>
<p>Now try logging into the machine, with:   “ssh ‘root@controller2’”<br>and check to make sure that only the key(s) you wanted were added.</p>
<p>[root@controller1 ~]# ssh-copy-id -i ~&#x2F;.ssh&#x2F;id_rsa.pub root@controller3<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: Source of key(s) to be installed: “&#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub”<br>The authenticity of host ‘controller3 (192.168.220.23)’ can’t be established.<br>ECDSA key fingerprint is SHA256:Q5vLVMvx0+FWYxqM263f4&#x2F;&#x2F;dH72IwEgT&#x2F;bWeOIlwTfY.<br>ECDSA key fingerprint is MD5:b5:6a:fb:3f:be:98:f7:d9:71:4e:d1:89:c4:7f:8f:00.<br>Are you sure you want to continue connecting (yes&#x2F;no)? yes<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: 1 key(s) remain to be installed – if you are prompted now it is to install the new keys<br>root@controller3’s password: </p>
<p>Number of key(s) added: 1</p>
<p>Now try logging into the machine, with:   “ssh ‘root@controller3’”<br>and check to make sure that only the key(s) you wanted were added.</p>
<p>[root@controller1 ~]# ssh controller2<br>Last login: Thu Dec 14 00:47:15 2017 from 192.168.220.1<br>[root@controller2 ~]# exit<br>logout<br>Connection to controller2 closed.<br>[root@controller1 ~]# ssh controller3<br>Last login: Thu Dec 14 00:47:16 2017 from 192.168.220.1<br>[root@controller3 ~]# exit<br>logout<br>Connection to controller3 closed.<br>[root@controller1 ~]# </p>
<h3 id="Use-Local-Repository"><a href="#Use-Local-Repository" class="headerlink" title="Use Local Repository"></a>Use Local Repository</h3><p>Refer to “CLOUD COMPUTING —&gt; OpenStack High Availability —&gt; 2.Create Local Repository</p>
<h4 id="Use-Ali-Mirror"><a href="#Use-Ali-Mirror" class="headerlink" title="Use Ali Mirror"></a>Use Ali Mirror</h4><p>[root@localrepo ~]# wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/repo/Centos-7.repo">http://mirrors.aliyun.com/repo/Centos-7.repo</a><br>[root@localrepo ~]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Pike.repo </p>
<p>[centos-openstack-pike]<br>name&#x3D;centos-openstack-pike<br>baseurl&#x3D;<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/$releasever/cloud/$basearch/openstack-pike/">https://mirrors.aliyun.com/centos/$releasever/cloud/$basearch/openstack-pike/</a><br>gpgcheck&#x3D;0<br>enabled&#x3D;1</p>
<p>[centos-qemu-ev]<br>name&#x3D;centos-qemu-ev<br>baseurl&#x3D;<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/$releasever/virt/$basearch/kvm-common/">https://mirrors.aliyun.com/centos/$releasever/virt/$basearch/kvm-common/</a><br>gpgcheck&#x3D;0<br>enabled&#x3D;1</p>
<h4 id="Sync-Repo"><a href="#Sync-Repo" class="headerlink" title="Sync Repo"></a>Sync Repo</h4><p>[root@localrepo myrepo]# reposync –repoid&#x3D;centos-openstack-pike<br>[root@localrepo myrepo]# reposync –repoid&#x3D;centos-qemu-ev<br>[root@localrepo myrepo]# ls -al<br>total 120<br>drwxr-xr-x. 7 root root    98 Dec 14 02:51 .<br>drwxr-xr-x. 3 root root    20 Dec 13 03:03 ..<br>drwxr-xr-x. 4 root root    38 Dec 14 02:30 base<br>drwxr-xr-x. 3 root root 90112 Dec 14 02:50 centos-openstack-pike<br>drwxr-xr-x. 2 root root  4096 Dec 14 02:51 centos-qemu-ev<br>drwxr-xr-x. 4 root root    38 Dec 14 02:31 extras<br>drwxr-xr-x. 4 root root    38 Dec 14 02:31 updates</p>
<h4 id="Create-Repo"><a href="#Create-Repo" class="headerlink" title="Create Repo"></a>Create Repo</h4><p>[root@localrepo myrepo]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;centos-openstack-pike<br>Spawning worker 0 with 1091 pkgs<br>Spawning worker 1 with 1091 pkgs<br>Workers Finished<br>Saving Primary metadata<br>Saving file lists metadata<br>Saving other metadata<br>Generating sqlite DBs<br>Sqlite DBs complete<br>[root@localrepo myrepo]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;centos-qemu-ev&#x2F;<br>Spawning worker 0 with 18 pkgs<br>Spawning worker 1 with 17 pkgs<br>Workers Finished<br>Saving Primary metadata<br>Saving file lists metadata<br>Saving other metadata<br>Generating sqlite DBs<br>Sqlite DBs complete</p>
<h4 id="Add-Ali-Mirror-On-Client-Node"><a href="#Add-Ali-Mirror-On-Client-Node" class="headerlink" title="Add Ali Mirror On Client Node"></a>Add Ali Mirror On Client Node</h4><p>[root@controller1 ~]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Pike.repo </p>
<p>[centos-openstack-pike]<br>name&#x3D;centos-openstack-pike<br>baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/centos-openstack-pike/">http://192.168.220.200/myrepo/centos-openstack-pike/</a><br>gpgcheck&#x3D;0<br>enabled&#x3D;1</p>
<p>[centos-qemu-ev]<br>name&#x3D;centos-qemu-ev<br>baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/centos-qemu-ev/">http://192.168.220.200/myrepo/centos-qemu-ev/</a><br>gpgcheck&#x3D;0<br>enabled&#x3D;1</p>
<p>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Pike.repo controller2:&#x2F;etc&#x2F;yum.repos.d&#x2F;<br>sending incremental file list<br>CentOS-Pike.repo<br>         247 100%    0.00kB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;0&#x2F;1)</p>
<p>sent 195 bytes  received 31 bytes  452.00 bytes&#x2F;sec<br>total size is 247  speedup is 1.09<br>[root@controller1 ~]# rsync -avzP  -e ‘ssh -p 22’  &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Pike.repo controller3:&#x2F;etc&#x2F;yum.repos.d&#x2F;<br>sending incremental file list<br>CentOS-Pike.repo<br>         247 100%    0.00kB&#x2F;s    0:00:00 (xfer#1, to-check&#x3D;0&#x2F;1)</p>
<p>sent 195 bytes  received 31 bytes  452.00 bytes&#x2F;sec<br>total size is 247  speedup is 1.09</p>
<h3 id="Install-OpenStack-Environment-On-All-Nodes"><a href="#Install-OpenStack-Environment-On-All-Nodes" class="headerlink" title="Install OpenStack Environment On All Nodes"></a>Install OpenStack Environment On All Nodes</h3><p>[root@controller1 ~]# yum install centos-release-openstack-pike -y<br>[root@controller1 ~]# yum install python-openstackclient openstack-selinux python2-PyMySQL openstack-utils -y<br>[root@controller1 ~]# yum update -y</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/08/install-centos-configure/" data-id="cl56jpsry00bnasch25rb0xsb" data-title="Install CentOS &amp; Configure" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-create-local-ntp" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/07/create-local-ntp/" class="article-date">
  <time class="dt-published" datetime="2017-12-07T00:02:35.000Z" itemprop="datePublished">2017-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>►<a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/CentOS-7/">CentOS 7</a>►<a class="article-category-link" href="/categories/operating-system/">operating-system</a>►<a class="article-category-link" href="/categories/operating-system/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/07/create-local-ntp/">Create Local NTP</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Controller-node"><a href="#Controller-node" class="headerlink" title="Controller node"></a>Controller node</h2><h3 id="Install-Chrony"><a href="#Install-Chrony" class="headerlink" title="Install Chrony"></a>Install Chrony</h3><p>[root@localhost ~]# yum install chrony -y</p>
<h3 id="Edit-the-x2F-etc-x2F-chrony-conf-file"><a href="#Edit-the-x2F-etc-x2F-chrony-conf-file" class="headerlink" title="Edit the &#x2F;etc&#x2F;chrony.conf file"></a>Edit the &#x2F;etc&#x2F;chrony.conf file</h3><p>[root@localntp ~]# diff &#x2F;etc&#x2F;chrony.conf &#x2F;etc&#x2F;chrony.conf_bak<br>3,7c3,6<br>&lt; #server 0.centos.pool.ntp.org iburst<br>&lt; #server 1.centos.pool.ntp.org iburst<br>&lt; #server 2.centos.pool.ntp.org iburst<br>&lt; #server 3.centos.pool.ntp.org iburst<br>&lt; server 192.168.220.201 iburst</p>
<hr>
<blockquote>
<p>server 0.centos.pool.ntp.org iburst<br>server 1.centos.pool.ntp.org iburst<br>server 2.centos.pool.ntp.org iburst<br>server 3.centos.pool.ntp.org iburst<br>28d26<br>&lt; allow 192.168.220.0&#x2F;24</p>
</blockquote>
<h3 id="Start-the-NTP-service"><a href="#Start-the-NTP-service" class="headerlink" title="Start the NTP service"></a>Start the NTP service</h3><p>[root@localhost ~]# systemctl enable chronyd.service<br>[root@localhost ~]# systemctl start chronyd.service<br>[root@localhost ~]# systemctl restart chronyd.service</p>
<h2 id="Other-nodes"><a href="#Other-nodes" class="headerlink" title="Other nodes"></a>Other nodes</h2><h3 id="Install-Chrony-1"><a href="#Install-Chrony-1" class="headerlink" title="Install Chrony"></a>Install Chrony</h3><p>[root@localhost ~]# yum install chrony -y</p>
<h3 id="Edit-the-x2F-etc-x2F-chrony-conf-file-1"><a href="#Edit-the-x2F-etc-x2F-chrony-conf-file-1" class="headerlink" title="Edit the &#x2F;etc&#x2F;chrony.conf file"></a>Edit the &#x2F;etc&#x2F;chrony.conf file</h3><p>[root@localhost ~]# diff &#x2F;etc&#x2F;chrony.conf &#x2F;etc&#x2F;chrony.conf_bak<br>3,7c3,6<br>&lt; #server 0.centos.pool.ntp.org iburst<br>&lt; #server 1.centos.pool.ntp.org iburst<br>&lt; #server 2.centos.pool.ntp.org iburst<br>&lt; #server 3.centos.pool.ntp.org iburst<br>&lt; server 192.168.220.201 iburst</p>
<hr>
<blockquote>
<p>server 0.centos.pool.ntp.org iburst<br>server 1.centos.pool.ntp.org iburst<br>server 2.centos.pool.ntp.org iburst<br>server 3.centos.pool.ntp.org iburst</p>
</blockquote>
<h3 id="Start-the-NTP-service-1"><a href="#Start-the-NTP-service-1" class="headerlink" title="Start the NTP service"></a>Start the NTP service</h3><p>[root@localhost ~]# systemctl enable chronyd.service<br>[root@localhost ~]# systemctl start chronyd.service<br>[root@localhost ~]# systemctl restart chronyd.service</p>
<h2 id="Verify-operation"><a href="#Verify-operation" class="headerlink" title="Verify operation"></a>Verify operation</h2><h3 id="controller-node"><a href="#controller-node" class="headerlink" title="controller node"></a>controller node</h3><p>[root@localhost ~]# chronyc sources<br>210 Number of sources &#x3D; 1<br>MS Name&#x2F;IP address         Stratum Poll Reach LastRx Last sample<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>^? localhost.localdomain         0   8     0     -     +0ns[   +0ns] +&#x2F;-    0ns</p>
<h3 id="other-nodes"><a href="#other-nodes" class="headerlink" title="other nodes"></a>other nodes</h3><p>[root@localhost ~]# chronyc sources<br>210 Number of sources &#x3D; 1<br>MS Name&#x2F;IP address         Stratum Poll Reach LastRx Last sample<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>^? 192.168.220.201               0   8     0     -     +0ns[   +0ns] +&#x2F;-    0ns</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/07/create-local-ntp/" data-id="cl56jpsp0008hasch1hk9fmqb" data-title="Create Local NTP" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-create-local-repository" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/06/create-local-repository/" class="article-date">
  <time class="dt-published" datetime="2017-12-06T09:06:41.000Z" itemprop="datePublished">2017-12-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud-Computing/">Cloud Computing</a>►<a class="article-category-link" href="/categories/cloud-computing/">cloud-computing</a>►<a class="article-category-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a>►<a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/CentOS-7/">CentOS 7</a>►<a class="article-category-link" href="/categories/operating-system/">operating-system</a>►<a class="article-category-link" href="/categories/operating-system/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/06/create-local-repository/">Create Local Repository</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Configure-Firewall"><a href="#Configure-Firewall" class="headerlink" title="Configure Firewall"></a>Configure Firewall</h3><p>[root@localhost ~]# systemctl stop firewalld.service<br>[root@localhost ~]# systemctl disable firewalld.service</p>
<h3 id="Install-Httpd-amp-Start-Service"><a href="#Install-Httpd-amp-Start-Service" class="headerlink" title="Install Httpd &amp; Start Service"></a>Install Httpd &amp; Start Service</h3><p>[root@localhost ~]# yum install httpd -y<br>[root@localhost ~]# systemctl enable httpd.service<br>[root@localhost ~]# systemctl restart httpd.service<br>[root@localhost ~]# systemctl status httpd.service</p>
<h3 id="Now-Take-the-Browser"><a href="#Now-Take-the-Browser" class="headerlink" title="Now, Take the Browser"></a>Now, Take the Browser</h3><p><strong><a target="_blank" rel="noopener" href="http://192.168.220.200/">http://192.168.220.200</a></strong></p>
<h3 id="Install-Reposync"><a href="#Install-Reposync" class="headerlink" title="Install Reposync"></a>Install Reposync</h3><p>[root@localhost ~]# yum install yum-utils -y</p>
<h3 id="Create-Repo-Dir"><a href="#Create-Repo-Dir" class="headerlink" title="Create Repo Dir"></a>Create Repo Dir</h3><p>[root@localhost ~]# mkdir &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo<br>[root@localhost ~]# cd &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo</p>
<h3 id="List-Repo"><a href="#List-Repo" class="headerlink" title="List Repo"></a>List Repo</h3><p>[root@localhost myrepo]# yum repolist<br>Loaded plugins: fastestmirror<br>Loading mirror speeds from cached hostfile<br> * base: mirrors.163.com<br> * extras: mirrors.163.com<br> * updates: mirrors.aliyun.com<br>repo id                                                 repo name                                                  status<br>base&#x2F;7&#x2F;x86_64                                           CentOS-7 - Base                                            9,591<br>extras&#x2F;7&#x2F;x86_64                                         CentOS-7 - Extras                                            284<br>updates&#x2F;7&#x2F;x86_64                                        CentOS-7 - Updates                                         1,490<br>repolist: 11,365</p>
<h3 id="Sync-Repo"><a href="#Sync-Repo" class="headerlink" title="Sync Repo"></a>Sync Repo</h3><p>[root@localhost myrepo]# reposync –repoid&#x3D;base<br>[root@localhost myrepo]# reposync –repoid&#x3D;updates<br>[root@localhost myrepo]# reposync –repoid&#x3D;extras<br>[root@localhost myrepo]# pwd<br>&#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo<br>[root@localhost myrepo]# ls -al<br>total 0<br>drwxr-xr-x. 5 root root 47 Dec  6 20:18 .<br>drwxr-xr-x. 3 root root 20 Dec  6 03:12 ..<br>drwxr-xr-x. 3 root root 22 Dec  6 03:48 base<br>drwxr-xr-x. 3 root root 22 Dec  6 20:18 extras<br>drwxr-xr-x. 3 root root 22 Dec  6 20:06 updates</p>
<h3 id="Install-Createrepo"><a href="#Install-Createrepo" class="headerlink" title="Install Createrepo"></a>Install Createrepo</h3><p>[root@localhost ~]# yum install createrepo -y</p>
<h3 id="Create-Repo"><a href="#Create-Repo" class="headerlink" title="Create Repo"></a>Create Repo</h3><p>[root@localhost ~]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;base<br>Spawning worker 0 with 9591 pkgs<br>Workers Finished<br>Saving Primary metadata<br>Saving file lists metadata<br>Saving other metadata<br>Generating sqlite DBs<br>Sqlite DBs complete<br>[root@localhost ~]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;updates<br>Spawning worker 0 with 1490 pkgs<br>Workers Finished<br>Saving Primary metadata<br>Saving file lists metadata<br>Saving other metadata<br>Generating sqlite DBs<br>Sqlite DBs complete<br>[root@localhost ~]# createrepo &#x2F;var&#x2F;www&#x2F;html&#x2F;myrepo&#x2F;extras<br>Spawning worker 0 with 284 pkgs<br>Workers Finished<br>Saving Primary metadata<br>Saving file lists metadata<br>Saving other metadata<br>Generating sqlite DBs<br>Sqlite DBs complete</p>
<h3 id="Now-Take-the-Browser-1"><a href="#Now-Take-the-Browser-1" class="headerlink" title="Now, Take the Browser"></a>Now, Take the Browser</h3><p><strong><a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/">http://192.168.220.200/myrepo/</a></strong> <img src="http://www.qinuu.com/wp-content/uploads/2017/12/LocalRepo-V1.png"></p>
<h3 id="Update-Client-Repo"><a href="#Update-Client-Repo" class="headerlink" title="Update Client Repo"></a>Update Client Repo</h3><p>[root@localhost ~]# diff &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo_bak<br>15c15<br>&lt; baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/base">http://192.168.220.200/myrepo/base</a></p>
<hr>
<blockquote>
<p>mirrorlist&#x3D;<a target="_blank" rel="noopener" href="http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra">http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra</a><br>17c17<br>&lt; gpgcheck&#x3D;0</p>
</blockquote>
<hr>
<blockquote>
<p>gpgcheck&#x3D;1<br>23c23<br>&lt; baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/updates">http://192.168.220.200/myrepo/updates</a></p>
</blockquote>
<hr>
<blockquote>
<p>mirrorlist&#x3D;<a target="_blank" rel="noopener" href="http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infra">http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infra</a><br>25c25<br>&lt; gpgcheck&#x3D;0</p>
</blockquote>
<hr>
<blockquote>
<p>gpgcheck&#x3D;1<br>31c31<br>&lt; baseurl&#x3D;<a target="_blank" rel="noopener" href="http://192.168.220.200/myrepo/extras">http://192.168.220.200/myrepo/extras</a></p>
</blockquote>
<hr>
<blockquote>
<p>mirrorlist&#x3D;<a target="_blank" rel="noopener" href="http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infra">http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infra</a><br>33c33<br>&lt; gpgcheck&#x3D;0</p>
</blockquote>
<hr>
<blockquote>
<p>gpgcheck&#x3D;1</p>
</blockquote>
<h3 id="Make-Client-Cache"><a href="#Make-Client-Cache" class="headerlink" title="Make Client Cache"></a>Make Client Cache</h3><p>[root@localhost ~]# yum clean all &amp;&amp; yum makecache</p>
<h3 id="Client-Example"><a href="#Client-Example" class="headerlink" title="Client Example"></a>Client Example</h3><p>[root@localhost ~]# yum install vim<br>Loaded plugins: fastestmirror<br>Loading mirror speeds from cached hostfile<br>Resolving Dependencies<br>–&gt; Running transaction check<br>—&gt; Package vim-enhanced.x86_64 2:7.4.160-2.el7 will be installed<br>–&gt; Processing Dependency: vim-common &#x3D; 2:7.4.160-2.el7 for package: 2:vim-enhanced-7.4.160-2.el7.x86_64<br>–&gt; Processing Dependency: perl(:MODULE_COMPAT_5.16.3) for package: 2:vim-enhanced-7.4.160-2.el7.x86_64<br>–&gt; Processing Dependency: libperl.so()(64bit) for package: 2:vim-enhanced-7.4.160-2.el7.x86_64<br>–&gt; Processing Dependency: libgpm.so.2()(64bit) for package: 2:vim-enhanced-7.4.160-2.el7.x86_64<br>–&gt; Running transaction check<br>—&gt; Package gpm-libs.x86_64 0:1.20.7-5.el7 will be installed<br>—&gt; Package perl.x86_64 4:5.16.3-292.el7 will be installed<br>–&gt; Processing Dependency: perl(Socket) &gt;&#x3D; 1.3 for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Scalar::Util) &gt;&#x3D; 1.10 for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl-macros for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(threads) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(constant) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-292.el7.x86_64<br>–&gt; Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-292.el7.x86_64<br>—&gt; Package perl-libs.x86_64 4:5.16.3-292.el7 will be installed<br>—&gt; Package vim-common.x86_64 2:7.4.160-2.el7 will be installed<br>–&gt; Processing Dependency: vim-filesystem for package: 2:vim-common-7.4.160-2.el7.x86_64<br>–&gt; Running transaction check<br>—&gt; Package perl-Carp.noarch 0:1.26-244.el7 will be installed<br>—&gt; Package perl-Exporter.noarch 0:5.68-3.el7 will be installed<br>—&gt; Package perl-File-Path.noarch 0:2.09-2.el7 will be installed<br>—&gt; Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed<br>—&gt; Package perl-Filter.x86_64 0:1.49-3.el7 will be installed<br>—&gt; Package perl-Getopt-Long.noarch 0:2.40-2.el7 will be installed<br>–&gt; Processing Dependency: perl(Pod::Usage) &gt;&#x3D; 1.14 for package: perl-Getopt-Long-2.40-2.el7.noarch<br>–&gt; Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-2.el7.noarch<br>—&gt; Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed<br>—&gt; Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed<br>–&gt; Processing Dependency: perl(Pod::Escapes) &gt;&#x3D; 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch<br>–&gt; Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch<br>—&gt; Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed<br>—&gt; Package perl-Socket.x86_64 0:2.010-4.el7 will be installed<br>—&gt; Package perl-Storable.x86_64 0:2.45-3.el7 will be installed<br>—&gt; Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed<br>—&gt; Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed<br>—&gt; Package perl-constant.noarch 0:1.27-2.el7 will be installed<br>—&gt; Package perl-macros.x86_64 4:5.16.3-292.el7 will be installed<br>—&gt; Package perl-threads.x86_64 0:1.87-4.el7 will be installed<br>—&gt; Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed<br>—&gt; Package vim-filesystem.x86_64 2:7.4.160-2.el7 will be installed<br>–&gt; Running transaction check<br>—&gt; Package perl-Encode.x86_64 0:2.51-7.el7 will be installed<br>—&gt; Package perl-Pod-Escapes.noarch 1:1.04-292.el7 will be installed<br>—&gt; Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed<br>–&gt; Processing Dependency: perl(Pod::Text) &gt;&#x3D; 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch<br>–&gt; Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch<br>—&gt; Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed<br>–&gt; Running transaction check<br>—&gt; Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed<br>–&gt; Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch<br>–&gt; Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch<br>—&gt; Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed<br>–&gt; Running transaction check<br>—&gt; Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed<br>—&gt; Package perl-parent.noarch 1:0.225-244.el7 will be installed<br>–&gt; Finished Dependency Resolution</p>
<p>Dependencies Resolved</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br> Package                               Arch                  Version                           Repository           Size<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>Installing:<br> vim-enhanced                          x86_64                2:7.4.160-2.el7                   base                1.0 M<br>Installing for dependencies:<br> gpm-libs                              x86_64                1.20.7-5.el7                      base                 32 k<br> perl                                  x86_64                4:5.16.3-292.el7                  base                8.0 M<br> perl-Carp                             noarch                1.26-244.el7                      base                 19 k<br> perl-Encode                           x86_64                2.51-7.el7                        base                1.5 M<br> perl-Exporter                         noarch                5.68-3.el7                        base                 28 k<br> perl-File-Path                        noarch                2.09-2.el7                        base                 26 k<br> perl-File-Temp                        noarch                0.23.01-3.el7                     base                 56 k<br> perl-Filter                           x86_64                1.49-3.el7                        base                 76 k<br> perl-Getopt-Long                      noarch                2.40-2.el7                        base                 56 k<br> perl-HTTP-Tiny                        noarch                0.033-3.el7                       base                 38 k<br> perl-PathTools                        x86_64                3.40-5.el7                        base                 82 k<br> perl-Pod-Escapes                      noarch                1:1.04-292.el7                    base                 51 k<br> perl-Pod-Perldoc                      noarch                3.20-4.el7                        base                 87 k<br> perl-Pod-Simple                       noarch                1:3.28-4.el7                      base                216 k<br> perl-Pod-Usage                        noarch                1.63-3.el7                        base                 27 k<br> perl-Scalar-List-Utils                x86_64                1.27-248.el7                      base                 36 k<br> perl-Socket                           x86_64                2.010-4.el7                       base                 49 k<br> perl-Storable                         x86_64                2.45-3.el7                        base                 77 k<br> perl-Text-ParseWords                  noarch                3.29-4.el7                        base                 14 k<br> perl-Time-HiRes                       x86_64                4:1.9725-3.el7                    base                 45 k<br> perl-Time-Local                       noarch                1.2300-2.el7                      base                 24 k<br> perl-constant                         noarch                1.27-2.el7                        base                 19 k<br> perl-libs                             x86_64                4:5.16.3-292.el7                  base                688 k<br> perl-macros                           x86_64                4:5.16.3-292.el7                  base                 43 k<br> perl-parent                           noarch                1:0.225-244.el7                   base                 12 k<br> perl-podlators                        noarch                2.5.1-3.el7                       base                112 k<br> perl-threads                          x86_64                1.87-4.el7                        base                 49 k<br> perl-threads-shared                   x86_64                1.43-6.el7                        base                 39 k<br> vim-common                            x86_64                2:7.4.160-2.el7                   base                5.9 M<br> vim-filesystem                        x86_64                2:7.4.160-2.el7                   base                9.8 k</p>
<h1 id="Transaction-Summary"><a href="#Transaction-Summary" class="headerlink" title="Transaction Summary"></a>Transaction Summary</h1><p>Install  1 Package (+30 Dependent packages)</p>
<p>Total download size: 18 M<br>Installed size: 60 M<br>Is this ok [y&#x2F;d&#x2F;N]: y<br>Downloading packages:<br>(1&#x2F;31): gpm-libs-1.20.7-5.el7.x86_64.rpm                                                            32 kB  00:00:00<br>(2&#x2F;31): perl-Carp-1.26-244.el7.noarch.rpm                                                           19 kB  00:00:00<br>(3&#x2F;31): perl-5.16.3-292.el7.x86_64.rpm                                                             8.0 MB  00:00:00<br>(4&#x2F;31): perl-Encode-2.51-7.el7.x86_64.rpm                                                          1.5 MB  00:00:00<br>(5&#x2F;31): perl-Exporter-5.68-3.el7.noarch.rpm                                                         28 kB  00:00:00<br>(6&#x2F;31): perl-File-Path-2.09-2.el7.noarch.rpm                                                        26 kB  00:00:00<br>(7&#x2F;31): perl-Filter-1.49-3.el7.x86_64.rpm                                                           76 kB  00:00:00<br>(8&#x2F;31): perl-Getopt-Long-2.40-2.el7.noarch.rpm                                                      56 kB  00:00:00<br>(9&#x2F;31): perl-File-Temp-0.23.01-3.el7.noarch.rpm                                                     56 kB  00:00:00<br>(10&#x2F;31): perl-HTTP-Tiny-0.033-3.el7.noarch.rpm                                                      38 kB  00:00:00<br>(11&#x2F;31): perl-Pod-Escapes-1.04-292.el7.noarch.rpm                                                   51 kB  00:00:00<br>(12&#x2F;31): perl-PathTools-3.40-5.el7.x86_64.rpm                                                       82 kB  00:00:00<br>(13&#x2F;31): perl-Pod-Perldoc-3.20-4.el7.noarch.rpm                                                     87 kB  00:00:00<br>(14&#x2F;31): perl-Pod-Usage-1.63-3.el7.noarch.rpm                                                       27 kB  00:00:00<br>(15&#x2F;31): perl-Pod-Simple-3.28-4.el7.noarch.rpm                                                     216 kB  00:00:00<br>(16&#x2F;31): perl-Scalar-List-Utils-1.27-248.el7.x86_64.rpm                                             36 kB  00:00:00<br>(17&#x2F;31): perl-Socket-2.010-4.el7.x86_64.rpm                                                         49 kB  00:00:00<br>(18&#x2F;31): perl-Storable-2.45-3.el7.x86_64.rpm                                                        77 kB  00:00:00<br>(19&#x2F;31): perl-Text-ParseWords-3.29-4.el7.noarch.rpm                                                 14 kB  00:00:00<br>(20&#x2F;31): perl-Time-HiRes-1.9725-3.el7.x86_64.rpm                                                    45 kB  00:00:00<br>(21&#x2F;31): perl-Time-Local-1.2300-2.el7.noarch.rpm                                                    24 kB  00:00:00<br>(22&#x2F;31): perl-constant-1.27-2.el7.noarch.rpm                                                        19 kB  00:00:00<br>(23&#x2F;31): perl-macros-5.16.3-292.el7.x86_64.rpm                                                      43 kB  00:00:00<br>(24&#x2F;31): perl-libs-5.16.3-292.el7.x86_64.rpm                                                       688 kB  00:00:00<br>(25&#x2F;31): perl-parent-0.225-244.el7.noarch.rpm                                                       12 kB  00:00:00<br>(26&#x2F;31): perl-threads-1.87-4.el7.x86_64.rpm                                                         49 kB  00:00:00<br>(27&#x2F;31): perl-threads-shared-1.43-6.el7.x86_64.rpm                                                  39 kB  00:00:00<br>(28&#x2F;31): perl-podlators-2.5.1-3.el7.noarch.rpm                                                     112 kB  00:00:00<br>(29&#x2F;31): vim-common-7.4.160-2.el7.x86_64.rpm                                                       5.9 MB  00:00:00<br>(30&#x2F;31): vim-filesystem-7.4.160-2.el7.x86_64.rpm                                                   9.8 kB  00:00:00<br>(31&#x2F;31): vim-enhanced-7.4.160-2.el7.x86_64.rpm                                                     1.0 MB  00:00:00     </p>
<hr>
<p>Total                                                                                     41 MB&#x2F;s   18 MB  00:00:00<br>Running transaction check<br>Running transaction test<br>Transaction test succeeded<br>Running transaction<br>  Installing : 1:perl-parent-0.225-244.el7.noarch                                                                   1&#x2F;31<br>  Installing : perl-HTTP-Tiny-0.033-3.el7.noarch                                                                    2&#x2F;31<br>  Installing : perl-podlators-2.5.1-3.el7.noarch                                                                    3&#x2F;31<br>  Installing : perl-Pod-Perldoc-3.20-4.el7.noarch                                                                   4&#x2F;31<br>  Installing : 1:perl-Pod-Escapes-1.04-292.el7.noarch                                                               5&#x2F;31<br>  Installing : perl-Text-ParseWords-3.29-4.el7.noarch                                                               6&#x2F;31<br>  Installing : perl-Encode-2.51-7.el7.x86_64                                                                        7&#x2F;31<br>  Installing : perl-Pod-Usage-1.63-3.el7.noarch                                                                     8&#x2F;31<br>  Installing : 4:perl-macros-5.16.3-292.el7.x86_64                                                                  9&#x2F;31<br>  Installing : 4:perl-libs-5.16.3-292.el7.x86_64                                                                   10&#x2F;31<br>  Installing : perl-Storable-2.45-3.el7.x86_64                                                                     11&#x2F;31<br>  Installing : perl-Exporter-5.68-3.el7.noarch                                                                     12&#x2F;31<br>  Installing : perl-constant-1.27-2.el7.noarch                                                                     13&#x2F;31<br>  Installing : perl-Time-Local-1.2300-2.el7.noarch                                                                 14&#x2F;31<br>  Installing : perl-Socket-2.010-4.el7.x86_64                                                                      15&#x2F;31<br>  Installing : perl-Carp-1.26-244.el7.noarch                                                                       16&#x2F;31<br>  Installing : perl-PathTools-3.40-5.el7.x86_64                                                                    17&#x2F;31<br>  Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64                                                          18&#x2F;31<br>  Installing : perl-File-Temp-0.23.01-3.el7.noarch                                                                 19&#x2F;31<br>  Installing : perl-File-Path-2.09-2.el7.noarch                                                                    20&#x2F;31<br>  Installing : perl-threads-shared-1.43-6.el7.x86_64                                                               21&#x2F;31<br>  Installing : perl-threads-1.87-4.el7.x86_64                                                                      22&#x2F;31<br>  Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                                               23&#x2F;31<br>  Installing : perl-Filter-1.49-3.el7.x86_64                                                                       24&#x2F;31<br>  Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch                                                                 25&#x2F;31<br>  Installing : perl-Getopt-Long-2.40-2.el7.noarch                                                                  26&#x2F;31<br>  Installing : 4:perl-5.16.3-292.el7.x86_64                                                                        27&#x2F;31<br>  Installing : gpm-libs-1.20.7-5.el7.x86_64                                                                        28&#x2F;31<br>  Installing : 2:vim-filesystem-7.4.160-2.el7.x86_64                                                               29&#x2F;31<br>  Installing : 2:vim-common-7.4.160-2.el7.x86_64                                                                   30&#x2F;31<br>  Installing : 2:vim-enhanced-7.4.160-2.el7.x86_64                                                                 31&#x2F;31<br>  Verifying  : perl-HTTP-Tiny-0.033-3.el7.noarch                                                                    1&#x2F;31<br>  Verifying  : perl-threads-shared-1.43-6.el7.x86_64                                                                2&#x2F;31<br>  Verifying  : perl-Storable-2.45-3.el7.x86_64                                                                      3&#x2F;31<br>  Verifying  : 2:vim-filesystem-7.4.160-2.el7.x86_64                                                                4&#x2F;31<br>  Verifying  : perl-Exporter-5.68-3.el7.noarch                                                                      5&#x2F;31<br>  Verifying  : perl-constant-1.27-2.el7.noarch                                                                      6&#x2F;31<br>  Verifying  : perl-PathTools-3.40-5.el7.x86_64                                                                     7&#x2F;31<br>  Verifying  : 4:perl-macros-5.16.3-292.el7.x86_64                                                                  8&#x2F;31<br>  Verifying  : 1:perl-parent-0.225-244.el7.noarch                                                                   9&#x2F;31<br>  Verifying  : 4:perl-5.16.3-292.el7.x86_64                                                                        10&#x2F;31<br>  Verifying  : perl-File-Temp-0.23.01-3.el7.noarch                                                                 11&#x2F;31<br>  Verifying  : 1:perl-Pod-Simple-3.28-4.el7.noarch                                                                 12&#x2F;31<br>  Verifying  : perl-Time-Local-1.2300-2.el7.noarch                                                                 13&#x2F;31<br>  Verifying  : gpm-libs-1.20.7-5.el7.x86_64                                                                        14&#x2F;31<br>  Verifying  : 4:perl-libs-5.16.3-292.el7.x86_64                                                                   15&#x2F;31<br>  Verifying  : perl-Pod-Perldoc-3.20-4.el7.noarch                                                                  16&#x2F;31<br>  Verifying  : perl-Socket-2.010-4.el7.x86_64                                                                      17&#x2F;31<br>  Verifying  : perl-Carp-1.26-244.el7.noarch                                                                       18&#x2F;31<br>  Verifying  : 2:vim-common-7.4.160-2.el7.x86_64                                                                   19&#x2F;31<br>  Verifying  : perl-Scalar-List-Utils-1.27-248.el7.x86_64                                                          20&#x2F;31<br>  Verifying  : 1:perl-Pod-Escapes-1.04-292.el7.noarch                                                              21&#x2F;31<br>  Verifying  : perl-Pod-Usage-1.63-3.el7.noarch                                                                    22&#x2F;31<br>  Verifying  : perl-Encode-2.51-7.el7.x86_64                                                                       23&#x2F;31<br>  Verifying  : perl-podlators-2.5.1-3.el7.noarch                                                                   24&#x2F;31<br>  Verifying  : perl-Getopt-Long-2.40-2.el7.noarch                                                                  25&#x2F;31<br>  Verifying  : 2:vim-enhanced-7.4.160-2.el7.x86_64                                                                 26&#x2F;31<br>  Verifying  : perl-File-Path-2.09-2.el7.noarch                                                                    27&#x2F;31<br>  Verifying  : perl-threads-1.87-4.el7.x86_64                                                                      28&#x2F;31<br>  Verifying  : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                                               29&#x2F;31<br>  Verifying  : perl-Filter-1.49-3.el7.x86_64                                                                       30&#x2F;31<br>  Verifying  : perl-Text-ParseWords-3.29-4.el7.noarch                                                              31&#x2F;31 </p>
<p>Installed:<br>  vim-enhanced.x86_64 2:7.4.160-2.el7                                                                                    </p>
<p>Dependency Installed:<br>  gpm-libs.x86_64 0:1.20.7-5.el7                            perl.x86_64 4:5.16.3-292.el7<br>  perl-Carp.noarch 0:1.26-244.el7                           perl-Encode.x86_64 0:2.51-7.el7<br>  perl-Exporter.noarch 0:5.68-3.el7                         perl-File-Path.noarch 0:2.09-2.el7<br>  perl-File-Temp.noarch 0:0.23.01-3.el7                     perl-Filter.x86_64 0:1.49-3.el7<br>  perl-Getopt-Long.noarch 0:2.40-2.el7                      perl-HTTP-Tiny.noarch 0:0.033-3.el7<br>  perl-PathTools.x86_64 0:3.40-5.el7                        perl-Pod-Escapes.noarch 1:1.04-292.el7<br>  perl-Pod-Perldoc.noarch 0:3.20-4.el7                      perl-Pod-Simple.noarch 1:3.28-4.el7<br>  perl-Pod-Usage.noarch 0:1.63-3.el7                        perl-Scalar-List-Utils.x86_64 0:1.27-248.el7<br>  perl-Socket.x86_64 0:2.010-4.el7                          perl-Storable.x86_64 0:2.45-3.el7<br>  perl-Text-ParseWords.noarch 0:3.29-4.el7                  perl-Time-HiRes.x86_64 4:1.9725-3.el7<br>  perl-Time-Local.noarch 0:1.2300-2.el7                     perl-constant.noarch 0:1.27-2.el7<br>  perl-libs.x86_64 4:5.16.3-292.el7                         perl-macros.x86_64 4:5.16.3-292.el7<br>  perl-parent.noarch 1:0.225-244.el7                        perl-podlators.noarch 0:2.5.1-3.el7<br>  perl-threads.x86_64 0:1.87-4.el7                          perl-threads-shared.x86_64 0:1.43-6.el7<br>  vim-common.x86_64 2:7.4.160-2.el7                         vim-filesystem.x86_64 2:7.4.160-2.el7                        </p>
<p>Complete!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/06/create-local-repository/" data-id="cl56jpsp2008jasch5kdp5nl6" data-title="Create Local Repository" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/24/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><a class="page-number" href="/page/27/">27</a><a class="extend next" rel="next" href="/page/26/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud-Computing/">Cloud Computing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Vision/">Computer Vision</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Internet-Of-Things/">Internet Of Things</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">Math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Multiple-Programming-Languages/">Multiple Programming Languages</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Operating-System/">Operating System</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Wordpress/">Wordpress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/">cloud-computing</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/OpenStack-All-In-One/">OpenStack All In One</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/OpenStack-High-Availability/">OpenStack High Availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/OpenStack-Pike-Installation/">OpenStack Pike Installation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud-computing/Virtualization/">Virtualization</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-vision/">computer-vision</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-vision/OpenCV/">OpenCV</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-vision/OpenCV/QT/">QT</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-vision/QT/">QT</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/deep-learning/">deep-learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/deep-learning/Deep-Learning-Specialization-Offered-By-deeplearning-ai/">Deep Learning Specialization Offered By deeplearning.ai</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/ARM/">ARM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/ARM/CentOS-7/">CentOS 7</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/ARM/CentOS-7/Ubuntu-16-04/">Ubuntu 16.04</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/CentOS-7/">CentOS 7</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/Ubuntu-16-04/">Ubuntu 16.04</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/X11/">X11</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/">machine-learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/Caffe/">Caffe</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/Deep-Learning/">Deep Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/MXNet/">MXNet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/Machine-Learning-Offered-By-Stanford-University/">Machine Learning Offered By Stanford University</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/TensorFlow/">TensorFlow</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/Yolo/">Yolo</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/">multiple-programming-languages</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Assembly/">Assembly</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Boost/">Boost</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Lua/">Lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/OpenSSL/">OpenSSL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Rust/">Rust</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/multiple-programming-languages/Web-Service/">Web Service</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/">operating-system</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/Android/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/Linux/Windows/">Windows</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/MacOS/">MacOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/OpenHarmony/">OpenHarmony</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/operating-system/Windows/">Windows</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/the-internet-of-thingslot/">the-internet-of-thingslot</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/the-internet-of-thingslot/i-MX-6ULL/">i.MX 6ULL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/the-internet-of-thingslot/i-MX-RT/">i.MX RT</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/uncategorized/">uncategorized</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/windows/Android-Studio/">Android Studio</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/windows/Android-Studio/GDA/">GDA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/windows/Android-Studio/GDA/JEB/">JEB</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/IDA-Pro/">IDA Pro</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/Visual-Studio/">Visual Studio</a></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/07/04/Test-Hexo/">Test-Hexo</a>
          </li>
        
          <li>
            <a href="/2022/07/04/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/09/10/i-mx6ull-linux-%E9%A9%B1%E5%8A%A8%E7%AF%87/">I.MX6ULL Linux 驱动篇</a>
          </li>
        
          <li>
            <a href="/2021/09/10/i-mx6ull-linux-%E7%B3%BB%E7%BB%9F%E7%AF%87/">I.MX6ULL Linux 系统篇</a>
          </li>
        
          <li>
            <a href="/2021/09/10/i-mx6ull-linux-%E8%A3%B8%E6%9C%BA%E7%AF%87/">I.MX6ULL Linux 裸机篇</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Water<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>